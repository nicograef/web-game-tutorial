/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Ball.ts":
/*!*********************!*\
  !*** ./src/Ball.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Ball)
/* harmony export */ });
class Ball {
    constructor(game) {
        this.game = game;
        this.radius = 10;
        this.speed = 80;
        this.vx = 1;
        this.vy = -1;
        this.x = (this.game.width - this.radius) / 2;
        this.y = (this.game.height - this.radius) / 2;
    }
    update(deltaTime) {
        this.x += (this.vx * this.speed) / deltaTime;
        this.y += (this.vy * this.speed) / deltaTime;
        // left border
        if (this.x - this.radius < 0) {
            this.x = this.radius;
            this.vx = -this.vx;
        }
        // right border
        if (this.x + this.radius > this.game.width) {
            this.x = this.game.width - this.radius;
            this.vx = -this.vx;
        }
        // top border
        if (this.y < 0 + this.radius) {
            this.y = this.radius;
            this.vy = -this.vy;
        }
        // bottom border
        if (this.y > this.game.height - this.radius) {
            // this.y = this.game.height - this.radius
            // this.vy = -this.vy
        }
    }
    draw(context) {
        const { x, y, radius } = this;
        context.beginPath();
        context.arc(x, y, radius, 0, 2 * Math.PI);
        context.fill();
        context.closePath();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFsbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9CYWxsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sQ0FBQyxPQUFPLE9BQU8sSUFBSTtJQVF2QixZQUFvQixJQUFVO1FBQVYsU0FBSSxHQUFKLElBQUksQ0FBTTtRQVB2QixXQUFNLEdBQUcsRUFBRSxDQUFBO1FBQ1YsVUFBSyxHQUFHLEVBQUUsQ0FBQTtRQUdWLE9BQUUsR0FBRyxDQUFDLENBQUE7UUFDUCxPQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7UUFHWixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQWlCO1FBQzdCLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUE7UUFDNUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLFNBQVMsQ0FBQTtRQUU1QyxjQUFjO1FBQ2QsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzVCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtZQUNwQixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQTtTQUNuQjtRQUVELGVBQWU7UUFDZixJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUMxQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUE7WUFDdEMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7U0FDbkI7UUFFRCxhQUFhO1FBQ2IsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQzVCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtZQUNwQixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQTtTQUNuQjtRQUVELGdCQUFnQjtRQUNoQixJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMzQywwQ0FBMEM7WUFDMUMscUJBQXFCO1NBQ3RCO0lBQ0gsQ0FBQztJQUVNLElBQUksQ0FBQyxPQUFpQztRQUMzQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUE7UUFDN0IsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDekMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFBO1FBQ2QsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO0lBQ3JCLENBQUM7Q0FDRiJ9

/***/ }),

/***/ "./src/Game.ts":
/*!*********************!*\
  !*** ./src/Game.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Game)
/* harmony export */ });
/* harmony import */ var _InputHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InputHandler */ "./src/InputHandler.ts");
/* harmony import */ var _Ball__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Ball */ "./src/Ball.ts");
/* harmony import */ var _Paddle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Paddle */ "./src/Paddle.ts");



class Game {
    constructor(canvas) {
        this.lastTimestamp = 0;
        this.context = canvas.getContext('2d');
        this.height = canvas.height;
        this.width = canvas.width;
        this.paddleBottom = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this, 'bottom');
        this.paddleTop = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this, 'top');
        this.ball = new _Ball__WEBPACK_IMPORTED_MODULE_1__.default(this);
        this.inputHandler = new _InputHandler__WEBPACK_IMPORTED_MODULE_0__.default({
            arrowLeftPressed: () => this.paddleBottom.moveLeft(),
            arrowLeftReleased: () => this.paddleBottom.stop('left'),
            arrowRightPressed: () => this.paddleBottom.moveRight(),
            arrowRightReleased: () => this.paddleBottom.stop('right'),
            keyAPressed: () => this.paddleTop.moveLeft(),
            keyAReleased: () => this.paddleTop.stop('left'),
            keyDPressed: () => this.paddleTop.moveRight(),
            keyDReleased: () => this.paddleTop.stop('right'),
        });
        this.inputHandler.setupAllListeners();
        this.loop(1);
    }
    restart() {
        this.paddleBottom = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this);
        this.ball = new _Ball__WEBPACK_IMPORTED_MODULE_1__.default(this);
        // this.inputHandler.setupAllListeners()
        this.loop(1);
    }
    stop() {
        // this.inputHandler.cleanupAllListeners()
        setTimeout(this.restart.bind(this), 1000);
    }
    update(deltaTime) {
        this.paddleBottom.update(deltaTime);
        this.paddleTop.update(deltaTime);
        this.ball.update(deltaTime);
        if (this.isBallOnPaddle()) {
            this.ball.vy = -1;
        }
    }
    draw() {
        this.ball.draw(this.context);
        this.paddleBottom.draw(this.context);
        this.paddleTop.draw(this.context);
    }
    clear() {
        this.context.clearRect(0, 0, this.width, this.height);
    }
    loop(timestamp) {
        const deltaTime = timestamp - this.lastTimestamp;
        this.lastTimestamp = timestamp;
        this.clear();
        this.update(deltaTime);
        this.draw();
        if (this.hasBallFallenThrough()) {
            this.stop();
            return;
        }
        window.requestAnimationFrame(this.loop.bind(this));
    }
    isBallOnPaddle() {
        return (this.ball.x >= this.paddleBottom.x &&
            this.ball.x <= this.paddleBottom.x + this.paddleBottom.width &&
            this.ball.y + this.ball.radius >= this.paddleBottom.y);
    }
    hasBallFallenThrough() {
        return this.ball.y - this.ball.radius >= this.height;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9HYW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sWUFBWSxNQUFNLGdCQUFnQixDQUFBO0FBQ3pDLE9BQU8sSUFBSSxNQUFNLFFBQVEsQ0FBQTtBQUN6QixPQUFPLE1BQU0sTUFBTSxVQUFVLENBQUE7QUFFN0IsTUFBTSxDQUFDLE9BQU8sT0FBTyxJQUFJO0lBYXZCLFlBQVksTUFBeUI7UUFGN0Isa0JBQWEsR0FBRyxDQUFDLENBQUE7UUFHdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFBO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQTtRQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUE7UUFFekIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDeEMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUUxQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksWUFBWSxDQUFDO1lBQ25DLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFO1lBQ3BELGlCQUFpQixFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUN2RCxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRTtZQUN0RCxrQkFBa0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFD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

/***/ }),

/***/ "./src/InputHandler.ts":
/*!*****************************!*\
  !*** ./src/InputHandler.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ InputHandler)
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums */ "./src/enums.ts");

class InputHandler {
    constructor(handlers) {
        this.handlers = handlers;
        this.onKeyDown = this.keyDownListener.bind(this);
        this.onKeyUp = this.keyUpListener.bind(this);
    }
    setupAllListeners() {
        document.addEventListener('keydown', this.onKeyDown);
        document.addEventListener('keyup', this.onKeyUp);
        return this.cleanupAllListeners;
    }
    cleanupAllListeners() {
        document.removeEventListener('keydown', this.onKeyDown);
        document.removeEventListener('keyup', this.onKeyUp);
    }
    keyDownListener(keyEvent) {
        if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
            this.handlers.arrowLeftPressed();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
            this.handlers.arrowRightPressed();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.A)
            this.handlers.keyAPressed();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.D)
            this.handlers.keyDPressed();
    }
    keyUpListener(keyEvent) {
        if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
            this.handlers.arrowLeftReleased();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
            this.handlers.arrowRightReleased();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.A)
            this.handlers.keyAReleased();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.D)
            this.handlers.keyDReleased();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXRIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0lucHV0SGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBYTlCLE1BQU0sQ0FBQyxPQUFPLE9BQU8sWUFBWTtJQUkvQixZQUFvQixRQUF3QjtRQUF4QixhQUFRLEdBQVIsUUFBUSxDQUFnQjtRQUMxQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ2hELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDOUMsQ0FBQztJQUVNLGlCQUFpQjtRQUN0QixRQUFRLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNwRCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNoRCxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQTtJQUNqQyxDQUFDO0lBRU0sbUJBQW1CO1FBQ3hCLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3ZELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3JELENBQUM7SUFFTyxlQUFlLENBQUMsUUFBdUI7UUFDN0MsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFBO2FBQzVELElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTthQUNuRSxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLENBQUM7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFBO2FBQ3pELElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUE7SUFDaEUsQ0FBQztJQUVPLGFBQWEsQ0FBQyxRQUF1QjtRQUMzQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUE7YUFDN0QsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxLQUFLO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO2FBQ3BFLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLENBQUE7YUFDMUQsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxDQUFDO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtJQUNqRSxDQUFDO0NBQ0YifQ==

/***/ }),

/***/ "./src/Paddle.ts":
/*!***********************!*\
  !*** ./src/Paddle.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Paddle)
/* harmony export */ });
class Paddle {
    constructor(game, position = 'bottom') {
        this.game = game;
        this.width = 150;
        this.height = 25;
        this.padding = 5;
        this.speed = 80;
        this.direction = null;
        this.x = (this.game.width - this.width) / 2;
        if (position === 'bottom')
            this.y = this.game.height - this.height - this.padding;
        else if (position === 'top')
            this.y = this.padding;
        else
            throw new Error('Paddle Position required');
    }
    moveLeft() {
        this.direction = 'left';
    }
    moveRight() {
        this.direction = 'right';
    }
    stop(direction = null) {
        if (this.direction === direction || direction === null)
            this.direction = null;
    }
    update(deltaTime) {
        if (this.direction === null)
            return;
        else if (this.direction === 'left')
            this.x -= this.speed / deltaTime;
        else if (this.direction === 'right')
            this.x += this.speed / deltaTime;
        // left border
        if (this.x < 0 + this.padding) {
            this.x = this.padding;
        }
        // right border
        if (this.x + this.width > this.game.width - this.padding) {
            this.x = this.game.width - this.width - this.padding;
        }
    }
    draw(context) {
        const { x, y, width, height } = this;
        context.fillRect(x, y, width, height);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFkZGxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1BhZGRsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxNQUFNLENBQUMsT0FBTyxPQUFPLE1BQU07SUFTekIsWUFBb0IsSUFBVSxFQUFFLFdBQTRCLFFBQVE7UUFBaEQsU0FBSSxHQUFKLElBQUksQ0FBTTtRQVJ2QixVQUFLLEdBQUcsR0FBRyxDQUFBO1FBQ1gsV0FBTSxHQUFHLEVBQUUsQ0FBQTtRQUNWLFlBQU8sR0FBRyxDQUFDLENBQUE7UUFDWCxVQUFLLEdBQUcsRUFBRSxDQUFBO1FBTWhCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFBO1FBQ3JCLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzNDLElBQUksUUFBUSxLQUFLLFFBQVE7WUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTthQUM1RSxJQUFJLFFBQVEsS0FBSyxLQUFLO1lBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBOztZQUM3QyxNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFDbEQsQ0FBQztJQUVNLFFBQVE7UUFDYixJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQTtJQUN6QixDQUFDO0lBRU0sU0FBUztRQUNkLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFBO0lBQzFCLENBQUM7SUFFTSxJQUFJLENBQUMsWUFBOEIsSUFBSTtRQUM1QyxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssU0FBUyxJQUFJLFNBQVMsS0FBSyxJQUFJO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7SUFDL0UsQ0FBQztJQUVNLE1BQU0sQ0FBQyxTQUFpQjtRQUM3QixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssSUFBSTtZQUFFLE9BQU07YUFDOUIsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU07WUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFBO2FBQy9ELElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxPQUFPO1lBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQTtRQUVyRSxjQUFjO1FBQ2QsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQzdCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtTQUN0QjtRQUVELGVBQWU7UUFDZixJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ3hELElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO1NBQ3JEO0lBQ0gsQ0FBQztJQUVNLElBQUksQ0FBQyxPQUFpQztRQUMzQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFBO1FBQ3BDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDdkMsQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/enums.ts":
/*!**********************!*\
  !*** ./src/enums.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KEYS": () => (/* binding */ KEYS)
/* harmony export */ });
var KEYS;
(function (KEYS) {
    KEYS["LEFT"] = "ArrowLeft";
    KEYS["RIGHT"] = "ArrowRight";
    KEYS["A"] = "KeyA";
    KEYS["D"] = "KeyD";
})(KEYS || (KEYS = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZW51bXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFOLElBQVksSUFLWDtBQUxELFdBQVksSUFBSTtJQUNkLDBCQUFrQixDQUFBO0lBQ2xCLDRCQUFvQixDQUFBO0lBQ3BCLGtCQUFVLENBQUE7SUFDVixrQkFBVSxDQUFBO0FBQ1osQ0FBQyxFQUxXLElBQUksS0FBSixJQUFJLFFBS2YifQ==

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Game */ "./src/Game.ts");

const canvas = document.querySelector('#screen');
new _Game__WEBPACK_IMPORTED_MODULE_0__.default(canvas);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxJQUFJLE1BQU0sUUFBUSxDQUFBO0FBRXpCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFNBQVMsQ0FBRSxDQUFBO0FBRXBFLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBIn0=

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9CYWxsLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL1BhZGRsZS50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9lbnVtcy50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHVyRTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQ0Q7QUFDaEI7QUFDSTtBQUNmO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw0Q0FBTTtBQUN0Qyw2QkFBNkIsNENBQU07QUFDbkMsd0JBQXdCLDBDQUFJO0FBQzVCLGdDQUFnQyxrREFBWTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDRDQUFNO0FBQ3RDLHdCQUF3QiwwQ0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHU0SDs7Ozs7Ozs7Ozs7Ozs7O0FDeEVaO0FBQ2hCO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZDQUFTO0FBQ3ZDO0FBQ0EsbUNBQW1DLDhDQUFVO0FBQzdDO0FBQ0EsbUNBQW1DLDBDQUFNO0FBQ3pDO0FBQ0EsbUNBQW1DLDBDQUFNO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw2Q0FBUztBQUN2QztBQUNBLG1DQUFtQyw4Q0FBVTtBQUM3QztBQUNBLG1DQUFtQywwQ0FBTTtBQUN6QztBQUNBLG1DQUFtQywwQ0FBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsKzdEOzs7Ozs7Ozs7Ozs7OztBQ3JDNUI7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsK3NFOzs7Ozs7Ozs7Ozs7OztBQy9DcEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQkFBb0I7QUFDckIsMkNBQTJDLCtVOzs7Ozs7Ozs7Ozs7QUNQakI7QUFDMUI7QUFDQSxJQUFJLDBDQUFJO0FBQ1IsMkNBQTJDLG1UOzs7Ozs7VUNIM0M7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0Esd0NBQXdDLHlDQUF5QztXQUNqRjtXQUNBO1dBQ0EsRTs7Ozs7V0NQQSx3Rjs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSxzREFBc0Qsa0JBQWtCO1dBQ3hFO1dBQ0EsK0NBQStDLGNBQWM7V0FDN0QsRTs7OztVQ05BO1VBQ0E7VUFDQTtVQUNBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhbGwge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSAxMDtcclxuICAgICAgICB0aGlzLnNwZWVkID0gODA7XHJcbiAgICAgICAgdGhpcy52eCA9IDE7XHJcbiAgICAgICAgdGhpcy52eSA9IC0xO1xyXG4gICAgICAgIHRoaXMueCA9ICh0aGlzLmdhbWUud2lkdGggLSB0aGlzLnJhZGl1cykgLyAyO1xyXG4gICAgICAgIHRoaXMueSA9ICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5yYWRpdXMpIC8gMjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpIHtcclxuICAgICAgICB0aGlzLnggKz0gKHRoaXMudnggKiB0aGlzLnNwZWVkKSAvIGRlbHRhVGltZTtcclxuICAgICAgICB0aGlzLnkgKz0gKHRoaXMudnkgKiB0aGlzLnNwZWVkKSAvIGRlbHRhVGltZTtcclxuICAgICAgICAvLyBsZWZ0IGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnggLSB0aGlzLnJhZGl1cyA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5yYWRpdXM7XHJcbiAgICAgICAgICAgIHRoaXMudnggPSAtdGhpcy52eDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmlnaHQgYm9yZGVyXHJcbiAgICAgICAgaWYgKHRoaXMueCArIHRoaXMucmFkaXVzID4gdGhpcy5nYW1lLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMucmFkaXVzO1xyXG4gICAgICAgICAgICB0aGlzLnZ4ID0gLXRoaXMudng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRvcCBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy55IDwgMCArIHRoaXMucmFkaXVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMucmFkaXVzO1xyXG4gICAgICAgICAgICB0aGlzLnZ5ID0gLXRoaXMudnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGJvdHRvbSBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy55ID4gdGhpcy5nYW1lLmhlaWdodCAtIHRoaXMucmFkaXVzKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLnJhZGl1c1xyXG4gICAgICAgICAgICAvLyB0aGlzLnZ5ID0gLXRoaXMudnlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3KGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHJhZGl1cyB9ID0gdGhpcztcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pUW1Gc2JDNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlDWVd4c0xuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVVZCTEUxQlFVMHNRMEZCUXl4UFFVRlBMRTlCUVU4c1NVRkJTVHRKUVZGMlFpeFpRVUZ2UWl4SlFVRlZPMUZCUVZZc1UwRkJTU3hIUVVGS0xFbEJRVWtzUTBGQlRUdFJRVkIyUWl4WFFVRk5MRWRCUVVjc1JVRkJSU3hEUVVGQk8xRkJRMVlzVlVGQlN5eEhRVUZITEVWQlFVVXNRMEZCUVR0UlFVZFdMRTlCUVVVc1IwRkJSeXhEUVVGRExFTkJRVUU3VVVGRFVDeFBRVUZGTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVFN1VVRkhXaXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRVHRSUVVNMVF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlFUdEpRVU12UXl4RFFVRkRPMGxCUlUwc1RVRkJUU3hEUVVGRExGTkJRV2xDTzFGQlF6ZENMRWxCUVVrc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4SFFVRkhMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eFRRVUZUTEVOQlFVRTdVVUZETlVNc1NVRkJTU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRWRCUVVjc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eEhRVUZITEZOQlFWTXNRMEZCUVR0UlFVVTFReXhqUVVGak8xRkJRMlFzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzUTBGQlF5eEZRVUZGTzFsQlF6VkNMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUVR0WlFVTndRaXhKUVVGSkxFTkJRVU1zUlVGQlJTeEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJRVHRUUVVOdVFqdFJRVVZFTEdWQlFXVTdVVUZEWml4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUlVGQlJUdFpRVU14UXl4SlFVRkpMRU5CUVVNc1EwRkJReXhIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVUU3V1VGRGRFTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVRTdVMEZEYmtJN1VVRkZSQ3hoUVVGaE8xRkJRMklzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeEZRVUZGTzFsQlF6VkNMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUVR0WlFVTndRaXhKUVVGSkxFTkJRVU1zUlVGQlJTeEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJRVHRUUVVOdVFqdFJRVVZFTEdkQ1FVRm5RanRSUVVOb1FpeEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1JVRkJSVHRaUVVNelF5d3dRMEZCTUVNN1dVRkRNVU1zY1VKQlFYRkNPMU5CUTNSQ08wbEJRMGdzUTBGQlF6dEpRVVZOTEVsQlFVa3NRMEZCUXl4UFFVRnBRenRSUVVNelF5eE5RVUZOTEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hOUVVGTkxFVkJRVVVzUjBGQlJ5eEpRVUZKTEVOQlFVRTdVVUZETjBJc1QwRkJUeXhEUVVGRExGTkJRVk1zUlVGQlJTeERRVUZCTzFGQlEyNUNMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4TlFVRk5MRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVFN1VVRkRla01zVDBGQlR5eERRVUZETEVsQlFVa3NSVUZCUlN4RFFVRkJPMUZCUTJRc1QwRkJUeXhEUVVGRExGTkJRVk1zUlVGQlJTeERRVUZCTzBsQlEzSkNMRU5CUVVNN1EwRkRSaUo5IiwiaW1wb3J0IElucHV0SGFuZGxlciBmcm9tICcuL0lucHV0SGFuZGxlcic7XHJcbmltcG9ydCBCYWxsIGZyb20gJy4vQmFsbCc7XHJcbmltcG9ydCBQYWRkbGUgZnJvbSAnLi9QYWRkbGUnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xyXG4gICAgICAgIHRoaXMubGFzdFRpbWVzdGFtcCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5wYWRkbGVCb3R0b20gPSBuZXcgUGFkZGxlKHRoaXMsICdib3R0b20nKTtcclxuICAgICAgICB0aGlzLnBhZGRsZVRvcCA9IG5ldyBQYWRkbGUodGhpcywgJ3RvcCcpO1xyXG4gICAgICAgIHRoaXMuYmFsbCA9IG5ldyBCYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRIYW5kbGVyID0gbmV3IElucHV0SGFuZGxlcih7XHJcbiAgICAgICAgICAgIGFycm93TGVmdFByZXNzZWQ6ICgpID0+IHRoaXMucGFkZGxlQm90dG9tLm1vdmVMZWZ0KCksXHJcbiAgICAgICAgICAgIGFycm93TGVmdFJlbGVhc2VkOiAoKSA9PiB0aGlzLnBhZGRsZUJvdHRvbS5zdG9wKCdsZWZ0JyksXHJcbiAgICAgICAgICAgIGFycm93UmlnaHRQcmVzc2VkOiAoKSA9PiB0aGlzLnBhZGRsZUJvdHRvbS5tb3ZlUmlnaHQoKSxcclxuICAgICAgICAgICAgYXJyb3dSaWdodFJlbGVhc2VkOiAoKSA9PiB0aGlzLnBhZGRsZUJvdHRvbS5zdG9wKCdyaWdodCcpLFxyXG4gICAgICAgICAgICBrZXlBUHJlc3NlZDogKCkgPT4gdGhpcy5wYWRkbGVUb3AubW92ZUxlZnQoKSxcclxuICAgICAgICAgICAga2V5QVJlbGVhc2VkOiAoKSA9PiB0aGlzLnBhZGRsZVRvcC5zdG9wKCdsZWZ0JyksXHJcbiAgICAgICAgICAgIGtleURQcmVzc2VkOiAoKSA9PiB0aGlzLnBhZGRsZVRvcC5tb3ZlUmlnaHQoKSxcclxuICAgICAgICAgICAga2V5RFJlbGVhc2VkOiAoKSA9PiB0aGlzLnBhZGRsZVRvcC5zdG9wKCdyaWdodCcpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRIYW5kbGVyLnNldHVwQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5sb29wKDEpO1xyXG4gICAgfVxyXG4gICAgcmVzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnBhZGRsZUJvdHRvbSA9IG5ldyBQYWRkbGUodGhpcyk7XHJcbiAgICAgICAgdGhpcy5iYWxsID0gbmV3IEJhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gdGhpcy5pbnB1dEhhbmRsZXIuc2V0dXBBbGxMaXN0ZW5lcnMoKVxyXG4gICAgICAgIHRoaXMubG9vcCgxKTtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5pbnB1dEhhbmRsZXIuY2xlYW51cEFsbExpc3RlbmVycygpXHJcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlc3RhcnQuYmluZCh0aGlzKSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5wYWRkbGVCb3R0b20udXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICAgICAgdGhpcy5wYWRkbGVUb3AudXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmFsbE9uUGFkZGxlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWxsLnZ5ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhdygpIHtcclxuICAgICAgICB0aGlzLmJhbGwuZHJhdyh0aGlzLmNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGFkZGxlQm90dG9tLmRyYXcodGhpcy5jb250ZXh0KTtcclxuICAgICAgICB0aGlzLnBhZGRsZVRvcC5kcmF3KHRoaXMuY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIGxvb3AodGltZXN0YW1wKSB7XHJcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gdGltZXN0YW1wIC0gdGhpcy5sYXN0VGltZXN0YW1wO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoZGVsdGFUaW1lKTtcclxuICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICBpZiAodGhpcy5oYXNCYWxsRmFsbGVuVGhyb3VnaCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5sb29wLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgaXNCYWxsT25QYWRkbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmJhbGwueCA+PSB0aGlzLnBhZGRsZUJvdHRvbS54ICYmXHJcbiAgICAgICAgICAgIHRoaXMuYmFsbC54IDw9IHRoaXMucGFkZGxlQm90dG9tLnggKyB0aGlzLnBhZGRsZUJvdHRvbS53aWR0aCAmJlxyXG4gICAgICAgICAgICB0aGlzLmJhbGwueSArIHRoaXMuYmFsbC5yYWRpdXMgPj0gdGhpcy5wYWRkbGVCb3R0b20ueSk7XHJcbiAgICB9XHJcbiAgICBoYXNCYWxsRmFsbGVuVGhyb3VnaCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYWxsLnkgLSB0aGlzLmJhbGwucmFkaXVzID49IHRoaXMuaGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVIyRnRaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5SFlXMWxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFOUJRVThzV1VGQldTeE5RVUZOTEdkQ1FVRm5RaXhEUVVGQk8wRkJRM3BETEU5QlFVOHNTVUZCU1N4TlFVRk5MRkZCUVZFc1EwRkJRVHRCUVVONlFpeFBRVUZQTEUxQlFVMHNUVUZCVFN4VlFVRlZMRU5CUVVFN1FVRkZOMElzVFVGQlRTeERRVUZETEU5QlFVOHNUMEZCVHl4SlFVRkpPMGxCWVhaQ0xGbEJRVmtzVFVGQmVVSTdVVUZHTjBJc2EwSkJRV0VzUjBGQlJ5eERRVUZETEVOQlFVRTdVVUZIZGtJc1NVRkJTU3hEUVVGRExFOUJRVThzUjBGQlJ5eE5RVUZOTEVOQlFVTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJSU3hEUVVGQk8xRkJRM1pETEVsQlFVa3NRMEZCUXl4TlFVRk5MRWRCUVVjc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlFUdFJRVU16UWl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVRTdVVUZGZWtJc1NVRkJTU3hEUVVGRExGbEJRVmtzUjBGQlJ5eEpRVUZKTEUxQlFVMHNRMEZCUXl4SlFVRkpMRVZCUVVVc1VVRkJVU3hEUVVGRExFTkJRVUU3VVVGRE9VTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFMUJRVTBzUTBGQlF5eEpRVUZKTEVWQlFVVXNTMEZCU3l4RFFVRkRMRU5CUVVFN1VVRkRlRU1zU1VGQlNTeERRVUZETEVsQlFVa3NSMEZCUnl4SlFVRkpMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlFUdFJRVVV4UWl4SlFVRkpMRU5CUVVNc1dVRkJXU3hIUVVGSExFbEJRVWtzV1VGQldTeERRVUZETzFsQlEyNURMR2RDUVVGblFpeEZRVUZGTEVkQlFVY3NSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhaUVVGWkxFTkJRVU1zVVVGQlVTeEZRVUZGTzFsQlEzQkVMR2xDUVVGcFFpeEZRVUZGTEVkQlFVY3NSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhaUVVGWkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXp0WlFVTjJSQ3hwUWtGQmFVSXNSVUZCUlN4SFFVRkhMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEZOQlFWTXNSVUZCUlR0WlFVTjBSQ3hyUWtGQmEwSXNSVUZCUlN4SFFVRkhMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNN1dVRkRla1FzVjBGQlZ5eEZRVUZGTEVkQlFVY3NSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zVVVGQlVTeEZRVUZGTzFsQlF6VkRMRmxCUVZrc1JVRkJSU3hIUVVGSExFVkJRVVVzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU03V1VGREwwTXNWMEZCVnl4RlFVRkZMRWRCUVVjc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eFRRVUZUTEVOQlFVTXNVMEZCVXl4RlFVRkZPMWxCUXpkRExGbEJRVmtzUlVGQlJTeEhRVUZITEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTTdVMEZEYWtRc1EwRkJReXhEUVVGQk8xRkJSVVlzU1VGQlNTeERRVUZETEZsQlFWa3NRMEZCUXl4cFFrRkJhVUlzUlVGQlJTeERRVUZCTzFGQlJYSkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVRTdTVUZEWkN4RFFVRkRPMGxCUlU4c1QwRkJUenRSUVVOaUxFbEJRVWtzUTBGQlF5eFpRVUZaTEVkQlFVY3NTVUZCU1N4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVUU3VVVGRGNFTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1IwRkJSeXhKUVVGSkxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUVR0UlFVTXhRaXgzUTBGQmQwTTdVVUZEZUVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUVR0SlFVTmtMRU5CUVVNN1NVRkZUeXhKUVVGSk8xRkJRMVlzTUVOQlFUQkRPMUZCUXpGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUVR0SlFVTXpReXhEUVVGRE8wbEJSVThzVFVGQlRTeERRVUZETEZOQlFXbENPMUZCUXpsQ0xFbEJRVWtzUTBGQlF5eFpRVUZaTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGQk8xRkJRMjVETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZCTzFGQlEyaERMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkJPMUZCUlROQ0xFbEJRVWtzU1VGQlNTeERRVUZETEdOQlFXTXNSVUZCUlN4RlFVRkZPMWxCUTNwQ0xFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGQk8xTkJRMnhDTzBsQlEwZ3NRMEZCUXp0SlFVVlBMRWxCUVVrN1VVRkRWaXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVUU3VVVGRE5VSXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkJPMUZCUTNCRExFbEJRVWtzUTBGQlF5eFRRVUZUTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlFUdEpRVU51UXl4RFFVRkRPMGxCUlU4c1MwRkJTenRSUVVOWUxFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFVkJRVVVzU1VGQlNTeERRVUZETEV0QlFVc3NSVUZCUlN4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVUU3U1VGRGRrUXNRMEZCUXp0SlFVVlBMRWxCUVVrc1EwRkJReXhUUVVFNFFqdFJRVU42UXl4TlFVRk5MRk5CUVZNc1IwRkJSeXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUVR0UlFVTm9SQ3hKUVVGSkxFTkJRVU1zWVVGQllTeEhRVUZITEZOQlFWTXNRMEZCUVR0UlFVVTVRaXhKUVVGSkxFTkJRVU1zUzBGQlN5eEZRVUZGTEVOQlFVRTdVVUZEV2l4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZCTzFGQlEzUkNMRWxCUVVrc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlFUdFJRVVZZTEVsQlFVa3NTVUZCU1N4RFFVRkRMRzlDUVVGdlFpeEZRVUZGTEVWQlFVVTdXVUZETDBJc1NVRkJTU3hEUVVGRExFbEJRVWtzUlVGQlJTeERRVUZCTzFsQlExZ3NUMEZCVFR0VFFVTlFPMUZCUlVRc1RVRkJUU3hEUVVGRExIRkNRVUZ4UWl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVFN1NVRkRjRVFzUTBGQlF6dEpRVVZQTEdOQlFXTTdVVUZEY0VJc1QwRkJUeXhEUVVOTUxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRWxCUVVrc1EwRkJReXhaUVVGWkxFTkJRVU1zUTBGQlF6dFpRVU5zUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zU1VGQlNTeEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEV0QlFVczdXVUZETlVRc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFbEJRVWtzU1VGQlNTeERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRMRU5CUTNSRUxFTkJRVUU3U1VGRFNDeERRVUZETzBsQlJVOHNiMEpCUVc5Q08xRkJRekZDTEU5QlFVOHNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRWxCUVVrc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlFUdEpRVU4wUkN4RFFVRkRPME5CUTBZaWZRPT0iLCJpbXBvcnQgeyBLRVlTIH0gZnJvbSAnLi9lbnVtcyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0SGFuZGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihoYW5kbGVycykge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcclxuICAgICAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMua2V5RG93bkxpc3RlbmVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbktleVVwID0gdGhpcy5rZXlVcExpc3RlbmVyLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICBzZXR1cEFsbExpc3RlbmVycygpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbGVhbnVwQWxsTGlzdGVuZXJzO1xyXG4gICAgfVxyXG4gICAgY2xlYW51cEFsbExpc3RlbmVycygpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwKTtcclxuICAgIH1cclxuICAgIGtleURvd25MaXN0ZW5lcihrZXlFdmVudCkge1xyXG4gICAgICAgIGlmIChrZXlFdmVudC5jb2RlID09PSBLRVlTLkxFRlQpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYXJyb3dMZWZ0UHJlc3NlZCgpO1xyXG4gICAgICAgIGVsc2UgaWYgKGtleUV2ZW50LmNvZGUgPT09IEtFWVMuUklHSFQpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYXJyb3dSaWdodFByZXNzZWQoKTtcclxuICAgICAgICBlbHNlIGlmIChrZXlFdmVudC5jb2RlID09PSBLRVlTLkEpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMua2V5QVByZXNzZWQoKTtcclxuICAgICAgICBlbHNlIGlmIChrZXlFdmVudC5jb2RlID09PSBLRVlTLkQpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMua2V5RFByZXNzZWQoKTtcclxuICAgIH1cclxuICAgIGtleVVwTGlzdGVuZXIoa2V5RXZlbnQpIHtcclxuICAgICAgICBpZiAoa2V5RXZlbnQuY29kZSA9PT0gS0VZUy5MRUZUKVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmFycm93TGVmdFJlbGVhc2VkKCk7XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5RXZlbnQuY29kZSA9PT0gS0VZUy5SSUdIVClcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hcnJvd1JpZ2h0UmVsZWFzZWQoKTtcclxuICAgICAgICBlbHNlIGlmIChrZXlFdmVudC5jb2RlID09PSBLRVlTLkEpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMua2V5QVJlbGVhc2VkKCk7XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5RXZlbnQuY29kZSA9PT0gS0VZUy5EKVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmtleURSZWxlYXNlZCgpO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVNXNXdkWFJJWVc1a2JHVnlMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUxpNHZjM0pqTDBsdWNIVjBTR0Z1Wkd4bGNpNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4UFFVRlBMRVZCUVVVc1NVRkJTU3hGUVVGRkxFMUJRVTBzVTBGQlV5eERRVUZCTzBGQllUbENMRTFCUVUwc1EwRkJReXhQUVVGUExFOUJRVThzV1VGQldUdEpRVWt2UWl4WlFVRnZRaXhSUVVGM1FqdFJRVUY0UWl4aFFVRlJMRWRCUVZJc1VVRkJVU3hEUVVGblFqdFJRVU14UXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlF5eGxRVUZsTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGQk8xRkJRMmhFTEVsQlFVa3NRMEZCUXl4UFFVRlBMRWRCUVVjc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVFN1NVRkRPVU1zUTBGQlF6dEpRVVZOTEdsQ1FVRnBRanRSUVVOMFFpeFJRVUZSTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zVTBGQlV5eEZRVUZGTEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJRVHRSUVVOd1JDeFJRVUZSTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zVDBGQlR5eEZRVUZGTEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJRVHRSUVVOb1JDeFBRVUZQTEVsQlFVa3NRMEZCUXl4dFFrRkJiVUlzUTBGQlFUdEpRVU5xUXl4RFFVRkRPMGxCUlUwc2JVSkJRVzFDTzFGQlEzaENMRkZCUVZFc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4VFFVRlRMRVZCUVVVc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZCTzFGQlEzWkVMRkZCUVZFc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4UFFVRlBMRVZCUVVVc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZCTzBsQlEzSkVMRU5CUVVNN1NVRkZUeXhsUVVGbExFTkJRVU1zVVVGQmRVSTdVVUZETjBNc1NVRkJTU3hSUVVGUkxFTkJRVU1zU1VGQlNTeExRVUZMTEVsQlFVa3NRMEZCUXl4SlFVRkpPMWxCUVVVc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eG5Ra0ZCWjBJc1JVRkJSU3hEUVVGQk8yRkJRelZFTEVsQlFVa3NVVUZCVVN4RFFVRkRMRWxCUVVrc1MwRkJTeXhKUVVGSkxFTkJRVU1zUzBGQlN6dFpRVUZGTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc2FVSkJRV2xDTEVWQlFVVXNRMEZCUVR0aFFVTnVSU3hKUVVGSkxGRkJRVkVzUTBGQlF5eEpRVUZKTEV0QlFVc3NTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkJSU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkJPMkZCUTNwRUxFbEJRVWtzVVVGQlVTeERRVUZETEVsQlFVa3NTMEZCU3l4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVGRkxFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNWMEZCVnl4RlFVRkZMRU5CUVVFN1NVRkRhRVVzUTBGQlF6dEpRVVZQTEdGQlFXRXNRMEZCUXl4UlFVRjFRanRSUVVNelF5eEpRVUZKTEZGQlFWRXNRMEZCUXl4SlFVRkpMRXRCUVVzc1NVRkJTU3hEUVVGRExFbEJRVWs3V1VGQlJTeEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMR2xDUVVGcFFpeEZRVUZGTEVOQlFVRTdZVUZETjBRc1NVRkJTU3hSUVVGUkxFTkJRVU1zU1VGQlNTeExRVUZMTEVsQlFVa3NRMEZCUXl4TFFVRkxPMWxCUVVVc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eHJRa0ZCYTBJc1JVRkJSU3hEUVVGQk8yRkJRM0JGTEVsQlFVa3NVVUZCVVN4RFFVRkRMRWxCUVVrc1MwRkJTeXhKUVVGSkxFTkJRVU1zUTBGQlF6dFpRVUZGTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1dVRkJXU3hGUVVGRkxFTkJRVUU3WVVGRE1VUXNTVUZCU1N4UlFVRlJMRU5CUVVNc1NVRkJTU3hMUVVGTExFbEJRVWtzUTBGQlF5eERRVUZETzFsQlFVVXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhaUVVGWkxFVkJRVVVzUTBGQlFUdEpRVU5xUlN4RFFVRkRPME5CUTBZaWZRPT0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYWRkbGUge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZSwgcG9zaXRpb24gPSAnYm90dG9tJykge1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDE1MDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDI1O1xyXG4gICAgICAgIHRoaXMucGFkZGluZyA9IDU7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDgwO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnggPSAodGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyO1xyXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2JvdHRvbScpXHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodCAtIHRoaXMucGFkZGluZztcclxuICAgICAgICBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcpXHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMucGFkZGluZztcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGFkZGxlIFBvc2l0aW9uIHJlcXVpcmVkJyk7XHJcbiAgICB9XHJcbiAgICBtb3ZlTGVmdCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgIH1cclxuICAgIG1vdmVSaWdodCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdyaWdodCc7XHJcbiAgICB9XHJcbiAgICBzdG9wKGRpcmVjdGlvbiA9IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbiB8fCBkaXJlY3Rpb24gPT09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ2xlZnQnKVxyXG4gICAgICAgICAgICB0aGlzLnggLT0gdGhpcy5zcGVlZCAvIGRlbHRhVGltZTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0JylcclxuICAgICAgICAgICAgdGhpcy54ICs9IHRoaXMuc3BlZWQgLyBkZWx0YVRpbWU7XHJcbiAgICAgICAgLy8gbGVmdCBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy54IDwgMCArIHRoaXMucGFkZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJpZ2h0IGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnggKyB0aGlzLndpZHRoID4gdGhpcy5nYW1lLndpZHRoIC0gdGhpcy5wYWRkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMud2lkdGggLSB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhdyhjb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pVUdGa1pHeGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUxpNHZjM0pqTDFCaFpHUnNaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGTFFTeE5RVUZOTEVOQlFVTXNUMEZCVHl4UFFVRlBMRTFCUVUwN1NVRlRla0lzV1VGQmIwSXNTVUZCVlN4RlFVRkZMRmRCUVRSQ0xGRkJRVkU3VVVGQmFFUXNVMEZCU1N4SFFVRktMRWxCUVVrc1EwRkJUVHRSUVZKMlFpeFZRVUZMTEVkQlFVY3NSMEZCUnl4RFFVRkJPMUZCUTFnc1YwRkJUU3hIUVVGSExFVkJRVVVzUTBGQlFUdFJRVU5XTEZsQlFVOHNSMEZCUnl4RFFVRkRMRU5CUVVFN1VVRkRXQ3hWUVVGTExFZEJRVWNzUlVGQlJTeERRVUZCTzFGQlRXaENMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZCTzFGQlEzSkNMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkJPMUZCUXpORExFbEJRVWtzVVVGQlVTeExRVUZMTEZGQlFWRTdXVUZCUlN4SlFVRkpMRU5CUVVNc1EwRkJReXhIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUVR0aFFVTTFSU3hKUVVGSkxGRkJRVkVzUzBGQlN5eExRVUZMTzFsQlFVVXNTVUZCU1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZCT3p0WlFVTTNReXhOUVVGTkxFbEJRVWtzUzBGQlN5eERRVUZETERCQ1FVRXdRaXhEUVVGRExFTkJRVUU3U1VGRGJFUXNRMEZCUXp0SlFVVk5MRkZCUVZFN1VVRkRZaXhKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEUxQlFVMHNRMEZCUVR0SlFVTjZRaXhEUVVGRE8wbEJSVTBzVTBGQlV6dFJRVU5rTEVsQlFVa3NRMEZCUXl4VFFVRlRMRWRCUVVjc1QwRkJUeXhEUVVGQk8wbEJRekZDTEVOQlFVTTdTVUZGVFN4SlFVRkpMRU5CUVVNc1dVRkJPRUlzU1VGQlNUdFJRVU0xUXl4SlFVRkpMRWxCUVVrc1EwRkJReXhUUVVGVExFdEJRVXNzVTBGQlV5eEpRVUZKTEZOQlFWTXNTMEZCU3l4SlFVRkpPMWxCUVVVc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eEpRVUZKTEVOQlFVRTdTVUZETDBVc1EwRkJRenRKUVVWTkxFMUJRVTBzUTBGQlF5eFRRVUZwUWp0UlFVTTNRaXhKUVVGSkxFbEJRVWtzUTBGQlF5eFRRVUZUTEV0QlFVc3NTVUZCU1R0WlFVRkZMRTlCUVUwN1lVRkRPVUlzU1VGQlNTeEpRVUZKTEVOQlFVTXNVMEZCVXl4TFFVRkxMRTFCUVUwN1dVRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVsQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1UwRkJVeXhEUVVGQk8yRkJReTlFTEVsQlFVa3NTVUZCU1N4RFFVRkRMRk5CUVZNc1MwRkJTeXhQUVVGUE8xbEJRVVVzU1VGQlNTeERRVUZETEVOQlFVTXNTVUZCU1N4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExGTkJRVk1zUTBGQlFUdFJRVVZ5UlN4alFVRmpPMUZCUTJRc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRk8xbEJRemRDTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlFUdFRRVU4wUWp0UlFVVkVMR1ZCUVdVN1VVRkRaaXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRk8xbEJRM2hFTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZCTzFOQlEzSkVPMGxCUTBnc1EwRkJRenRKUVVWTkxFbEJRVWtzUTBGQlF5eFBRVUZwUXp0UlFVTXpReXhOUVVGTkxFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4TFFVRkxMRVZCUVVVc1RVRkJUU3hGUVVGRkxFZEJRVWNzU1VGQlNTeERRVUZCTzFGQlEzQkRMRTlCUVU4c1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4TFFVRkxMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVUU3U1VGRGRrTXNRMEZCUXp0RFFVTkdJbjA9IiwiZXhwb3J0IHZhciBLRVlTO1xyXG4oZnVuY3Rpb24gKEtFWVMpIHtcclxuICAgIEtFWVNbXCJMRUZUXCJdID0gXCJBcnJvd0xlZnRcIjtcclxuICAgIEtFWVNbXCJSSUdIVFwiXSA9IFwiQXJyb3dSaWdodFwiO1xyXG4gICAgS0VZU1tcIkFcIl0gPSBcIktleUFcIjtcclxuICAgIEtFWVNbXCJEXCJdID0gXCJLZXlEXCI7XHJcbn0pKEtFWVMgfHwgKEtFWVMgPSB7fSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laVzUxYlhNdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk5emNtTXZaVzUxYlhNdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVFVGQlRTeERRVUZPTEVsQlFWa3NTVUZMV0R0QlFVeEVMRmRCUVZrc1NVRkJTVHRKUVVOa0xEQkNRVUZyUWl4RFFVRkJPMGxCUTJ4Q0xEUkNRVUZ2UWl4RFFVRkJPMGxCUTNCQ0xHdENRVUZWTEVOQlFVRTdTVUZEVml4clFrRkJWU3hEUVVGQk8wRkJRMW9zUTBGQlF5eEZRVXhYTEVsQlFVa3NTMEZCU2l4SlFVRkpMRkZCUzJZaWZRPT0iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2NyZWVuJyk7XHJcbm5ldyBHYW1lKGNhbnZhcyk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFXNWtaWGd1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTl6Y21NdmFXNWtaWGd1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNUMEZCVHl4SlFVRkpMRTFCUVUwc1VVRkJVU3hEUVVGQk8wRkJSWHBDTEUxQlFVMHNUVUZCVFN4SFFVRkhMRkZCUVZFc1EwRkJReXhoUVVGaExFTkJRVzlDTEZOQlFWTXNRMEZCUlN4RFFVRkJPMEZCUlhCRkxFbEJRVWtzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkJJbjA9IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbl9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC50c1wiKTtcbi8vIFRoaXMgZW50cnkgbW9kdWxlIHVzZWQgJ2V4cG9ydHMnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbiJdLCJzb3VyY2VSb290IjoiIn0=