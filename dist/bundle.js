/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/InputHandler.ts":
/*!*****************************!*\
  !*** ./src/InputHandler.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ InputHandler
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums */ "./src/enums.ts");

class InputHandler {
    constructor(handlers) {
        document.addEventListener('keydown', (keyDownEvent) => {
            keyDownEvent.preventDefault();
            if (keyDownEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
                handlers.arrowLeftPressed();
            else if (keyDownEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
                handlers.arrowRightPressed();
        });
        document.addEventListener('keyup', (keyDownEvent) => {
            keyDownEvent.preventDefault();
            if (keyDownEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
                handlers.arrowLeftReleased();
            else if (keyDownEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
                handlers.arrowRightReleased();
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXRIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0lucHV0SGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBUzlCLE1BQU0sQ0FBQyxPQUFPLE9BQU8sWUFBWTtJQUMvQixZQUFZLFFBQXdCO1FBQ2xDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxZQUFZLEVBQUUsRUFBRTtZQUNwRCxZQUFZLENBQUMsY0FBYyxFQUFFLENBQUE7WUFDN0IsSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJO2dCQUFFLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFBO2lCQUMzRCxJQUFJLFlBQVksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEtBQUs7Z0JBQUUsUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDekUsQ0FBQyxDQUFDLENBQUE7UUFFRixRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsWUFBWSxFQUFFLEVBQUU7WUFDbEQsWUFBWSxDQUFDLGNBQWMsRUFBRSxDQUFBO1lBQzdCLElBQUksWUFBWSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTtnQkFBRSxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtpQkFDNUQsSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxLQUFLO2dCQUFFLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQzFFLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/Paddle.ts":
/*!***********************!*\
  !*** ./src/Paddle.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ Paddle
/* harmony export */ });
class Paddle {
    constructor(gameWidth, gameHeight) {
        this.gameWidth = gameWidth;
        this.gameHeight = gameHeight;
        this.width = 150;
        this.height = 25;
        this.padding = 5;
        this.speed = 10;
        this.x = (this.gameWidth - this.width) / 2;
        this.y = this.gameHeight - this.height - this.padding;
        this.direction = null;
    }
    moveLeft() {
        this.direction = 'left';
    }
    stopLeft() {
        if (this.direction !== 'left')
            return;
        this.direction = null;
    }
    moveRight() {
        this.direction = 'right';
    }
    stopRight() {
        if (this.direction !== 'right')
            return;
        this.direction = null;
    }
    stop() {
        this.direction = null;
    }
    update(deltaTime) {
        if (this.direction === null)
            return;
        else if (this.direction === 'left')
            this.x -= this.speed / deltaTime;
        else if (this.direction === 'right')
            this.x += this.speed / deltaTime;
        if (this.x < 0 + this.padding)
            this.x = this.padding;
        if (this.x + this.width > this.gameWidth - this.padding)
            this.x = this.gameWidth - this.width - this.padding;
    }
    draw(context) {
        const { x, y, width, height } = this;
        context.fillRect(x, y, width, height);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFkZGxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1BhZGRsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsT0FBTyxPQUFPLE1BQU07SUFTekIsWUFBb0IsU0FBaUIsRUFBVSxVQUFrQjtRQUE3QyxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQVUsZUFBVSxHQUFWLFVBQVUsQ0FBUTtRQVJ6RCxVQUFLLEdBQUcsR0FBRyxDQUFBO1FBQ1gsV0FBTSxHQUFHLEVBQUUsQ0FBQTtRQUNYLFlBQU8sR0FBRyxDQUFDLENBQUE7UUFDWCxVQUFLLEdBQUcsRUFBRSxDQUFBO1FBTWhCLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtRQUNyRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sUUFBUTtRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO0lBQ3pCLENBQUM7SUFFTSxRQUFRO1FBQ2IsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU07WUFBRSxPQUFNO1FBQ3JDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFBO0lBQ3ZCLENBQUM7SUFFTSxTQUFTO1FBQ2QsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUE7SUFDMUIsQ0FBQztJQUVNLFNBQVM7UUFDZCxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssT0FBTztZQUFFLE9BQU07UUFDdEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7SUFDdkIsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQWlCO1FBQzdCLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJO1lBQUUsT0FBTTthQUM5QixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTTtZQUFFLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUE7YUFDL0QsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE9BQU87WUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFBO1FBRXJFLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU87WUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7UUFDcEQsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTztZQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7SUFDOUcsQ0FBQztJQUVNLElBQUksQ0FBQyxPQUFpQztRQUMzQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFBO1FBQ3BDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDdkMsQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/enums.ts":
/*!**********************!*\
  !*** ./src/enums.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KEYS": () => /* binding */ KEYS
/* harmony export */ });
var KEYS;
(function (KEYS) {
    KEYS["LEFT"] = "ArrowLeft";
    KEYS["RIGHT"] = "ArrowRight";
})(KEYS || (KEYS = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZW51bXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFOLElBQVksSUFHWDtBQUhELFdBQVksSUFBSTtJQUNkLDBCQUFrQixDQUFBO0lBQ2xCLDRCQUFvQixDQUFBO0FBQ3RCLENBQUMsRUFIVyxJQUFJLEtBQUosSUFBSSxRQUdmIn0=

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _InputHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InputHandler */ "./src/InputHandler.ts");
/* harmony import */ var _Paddle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Paddle */ "./src/Paddle.ts");


const GAME_WIDTH = 900;
const GAME_HEIGHT = 600;
const canvas = document.querySelector('#screen');
const context = canvas.getContext('2d');
const paddle = new _Paddle__WEBPACK_IMPORTED_MODULE_1__.default(GAME_WIDTH, GAME_HEIGHT);
new _InputHandler__WEBPACK_IMPORTED_MODULE_0__.default({
    arrowLeftPressed: () => paddle.moveLeft(),
    arrowLeftReleased: () => paddle.stopLeft(),
    arrowRightPressed: () => paddle.moveRight(),
    arrowRightReleased: () => paddle.stopRight(),
});
let lastTime = 0;
function gameLoop(timestamp) {
    let deltaTime = timestamp - lastTime;
    lastTime = timestamp;
    context.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
    paddle.update(deltaTime);
    paddle.draw(context);
    window.requestAnimationFrame(gameLoop);
}
gameLoop(1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxZQUFZLE1BQU0sZ0JBQWdCLENBQUE7QUFDekMsT0FBTyxNQUFNLE1BQU0sVUFBVSxDQUFBO0FBRTdCLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQTtBQUN0QixNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUE7QUFFdkIsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBb0IsU0FBUyxDQUFFLENBQUE7QUFDcEUsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUUsQ0FBQTtBQUV4QyxNQUFNLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUE7QUFFbEQsSUFBSSxZQUFZLENBQUM7SUFDZixnQkFBZ0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFO0lBQ3pDLGlCQUFpQixFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7SUFDMUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRTtJQUMzQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFO0NBQzdDLENBQUMsQ0FBQTtBQUVGLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQTtBQUNoQixTQUFTLFFBQVEsQ0FBQyxTQUE4QjtJQUM5QyxJQUFJLFNBQVMsR0FBRyxTQUFTLEdBQUcsUUFBUSxDQUFBO0lBQ3BDLFFBQVEsR0FBRyxTQUFTLENBQUE7SUFFcEIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQTtJQUVoRCxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7SUFFcEIsTUFBTSxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBQ3hDLENBQUM7QUFFRCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUEifQ==

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9JbnB1dEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvLi9zcmMvUGFkZGxlLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL2VudW1zLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUNoQjtBQUNmO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw2Q0FBUztBQUMvQztBQUNBLDJDQUEyQyw4Q0FBVTtBQUNyRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0NBQXNDLDZDQUFTO0FBQy9DO0FBQ0EsMkNBQTJDLDhDQUFVO0FBQ3JEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwyQ0FBMkMsdS9COzs7Ozs7Ozs7Ozs7OztBQ25CNUI7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxtbkU7Ozs7Ozs7Ozs7Ozs7O0FDaERwQztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0JBQW9CO0FBQ3JCLDJDQUEyQyxtUzs7Ozs7Ozs7Ozs7OztBQ0xEO0FBQ1o7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNENBQU07QUFDekIsSUFBSSxrREFBWTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQywyMEM7Ozs7OztVQ3ZCM0M7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0Esd0NBQXdDLHlDQUF5QztXQUNqRjtXQUNBO1dBQ0EsRTs7Ozs7V0NQQSxzRjs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSxzREFBc0Qsa0JBQWtCO1dBQ3hFO1dBQ0EsK0NBQStDLGNBQWM7V0FDN0QsRTs7OztVQ05BO1VBQ0E7VUFDQTtVQUNBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtFWVMgfSBmcm9tICcuL2VudW1zJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGhhbmRsZXJzKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChrZXlEb3duRXZlbnQpID0+IHtcclxuICAgICAgICAgICAga2V5RG93bkV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChrZXlEb3duRXZlbnQuY29kZSA9PT0gS0VZUy5MRUZUKVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlcnMuYXJyb3dMZWZ0UHJlc3NlZCgpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChrZXlEb3duRXZlbnQuY29kZSA9PT0gS0VZUy5SSUdIVClcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzLmFycm93UmlnaHRQcmVzc2VkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoa2V5RG93bkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGtleURvd25FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoa2V5RG93bkV2ZW50LmNvZGUgPT09IEtFWVMuTEVGVClcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzLmFycm93TGVmdFJlbGVhc2VkKCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGtleURvd25FdmVudC5jb2RlID09PSBLRVlTLlJJR0hUKVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlcnMuYXJyb3dSaWdodFJlbGVhc2VkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pU1c1d2RYUklZVzVrYkdWeUxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTGk0dmMzSmpMMGx1Y0hWMFNHRnVaR3hsY2k1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hQUVVGUExFVkJRVVVzU1VGQlNTeEZRVUZGTEUxQlFVMHNVMEZCVXl4RFFVRkJPMEZCVXpsQ0xFMUJRVTBzUTBGQlF5eFBRVUZQTEU5QlFVOHNXVUZCV1R0SlFVTXZRaXhaUVVGWkxGRkJRWGRDTzFGQlEyeERMRkZCUVZFc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4VFFVRlRMRVZCUVVVc1EwRkJReXhaUVVGWkxFVkJRVVVzUlVGQlJUdFpRVU53UkN4WlFVRlpMRU5CUVVNc1kwRkJZeXhGUVVGRkxFTkJRVUU3V1VGRE4wSXNTVUZCU1N4WlFVRlpMRU5CUVVNc1NVRkJTU3hMUVVGTExFbEJRVWtzUTBGQlF5eEpRVUZKTzJkQ1FVRkZMRkZCUVZFc1EwRkJReXhuUWtGQlowSXNSVUZCUlN4RFFVRkJPMmxDUVVNelJDeEpRVUZKTEZsQlFWa3NRMEZCUXl4SlFVRkpMRXRCUVVzc1NVRkJTU3hEUVVGRExFdEJRVXM3WjBKQlFVVXNVVUZCVVN4RFFVRkRMR2xDUVVGcFFpeEZRVUZGTEVOQlFVRTdVVUZEZWtVc1EwRkJReXhEUVVGRExFTkJRVUU3VVVGRlJpeFJRVUZSTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zVDBGQlR5eEZRVUZGTEVOQlFVTXNXVUZCV1N4RlFVRkZMRVZCUVVVN1dVRkRiRVFzV1VGQldTeERRVUZETEdOQlFXTXNSVUZCUlN4RFFVRkJPMWxCUXpkQ0xFbEJRVWtzV1VGQldTeERRVUZETEVsQlFVa3NTMEZCU3l4SlFVRkpMRU5CUVVNc1NVRkJTVHRuUWtGQlJTeFJRVUZSTEVOQlFVTXNhVUpCUVdsQ0xFVkJRVVVzUTBGQlFUdHBRa0ZETlVRc1NVRkJTU3haUVVGWkxFTkJRVU1zU1VGQlNTeExRVUZMTEVsQlFVa3NRMEZCUXl4TFFVRkxPMmRDUVVGRkxGRkJRVkVzUTBGQlF5eHJRa0ZCYTBJc1JVRkJSU3hEUVVGQk8xRkJRekZGTEVOQlFVTXNRMEZCUXl4RFFVRkJPMGxCUTBvc1EwRkJRenREUVVOR0luMD0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYWRkbGUge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVdpZHRoLCBnYW1lSGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5nYW1lV2lkdGggPSBnYW1lV2lkdGg7XHJcbiAgICAgICAgdGhpcy5nYW1lSGVpZ2h0ID0gZ2FtZUhlaWdodDtcclxuICAgICAgICB0aGlzLndpZHRoID0gMTUwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjU7XHJcbiAgICAgICAgdGhpcy5wYWRkaW5nID0gNTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gMTA7XHJcbiAgICAgICAgdGhpcy54ID0gKHRoaXMuZ2FtZVdpZHRoIC0gdGhpcy53aWR0aCkgLyAyO1xyXG4gICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZUhlaWdodCAtIHRoaXMuaGVpZ2h0IC0gdGhpcy5wYWRkaW5nO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIG1vdmVMZWZ0KCkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ2xlZnQnO1xyXG4gICAgfVxyXG4gICAgc3RvcExlZnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uICE9PSAnbGVmdCcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBtb3ZlUmlnaHQoKSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAncmlnaHQnO1xyXG4gICAgfVxyXG4gICAgc3RvcFJpZ2h0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPT0gJ3JpZ2h0JylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGRlbHRhVGltZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAnbGVmdCcpXHJcbiAgICAgICAgICAgIHRoaXMueCAtPSB0aGlzLnNwZWVkIC8gZGVsdGFUaW1lO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAncmlnaHQnKVxyXG4gICAgICAgICAgICB0aGlzLnggKz0gdGhpcy5zcGVlZCAvIGRlbHRhVGltZTtcclxuICAgICAgICBpZiAodGhpcy54IDwgMCArIHRoaXMucGFkZGluZylcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5wYWRkaW5nO1xyXG4gICAgICAgIGlmICh0aGlzLnggKyB0aGlzLndpZHRoID4gdGhpcy5nYW1lV2lkdGggLSB0aGlzLnBhZGRpbmcpXHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZVdpZHRoIC0gdGhpcy53aWR0aCAtIHRoaXMucGFkZGluZztcclxuICAgIH1cclxuICAgIGRyYXcoY29udGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVVHRmtaR3hsTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMaTR2YzNKakwxQmhaR1JzWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hOUVVGTkxFTkJRVU1zVDBGQlR5eFBRVUZQTEUxQlFVMDdTVUZUZWtJc1dVRkJiMElzVTBGQmFVSXNSVUZCVlN4VlFVRnJRanRSUVVFM1F5eGpRVUZUTEVkQlFWUXNVMEZCVXl4RFFVRlJPMUZCUVZVc1pVRkJWU3hIUVVGV0xGVkJRVlVzUTBGQlVUdFJRVko2UkN4VlFVRkxMRWRCUVVjc1IwRkJSeXhEUVVGQk8xRkJRMWdzVjBGQlRTeEhRVUZITEVWQlFVVXNRMEZCUVR0UlFVTllMRmxCUVU4c1IwRkJSeXhEUVVGRExFTkJRVUU3VVVGRFdDeFZRVUZMTEVkQlFVY3NSVUZCUlN4RFFVRkJPMUZCVFdoQ0xFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVFN1VVRkRNVU1zU1VGQlNTeERRVUZETEVOQlFVTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJRVHRSUVVOeVJDeEpRVUZKTEVOQlFVTXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRVHRKUVVOMlFpeERRVUZETzBsQlJVMHNVVUZCVVR0UlFVTmlMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzVFVGQlRTeERRVUZCTzBsQlEzcENMRU5CUVVNN1NVRkZUU3hSUVVGUk8xRkJRMklzU1VGQlNTeEpRVUZKTEVOQlFVTXNVMEZCVXl4TFFVRkxMRTFCUVUwN1dVRkJSU3hQUVVGTk8xRkJRM0pETEVsQlFVa3NRMEZCUXl4VFFVRlRMRWRCUVVjc1NVRkJTU3hEUVVGQk8wbEJRM1pDTEVOQlFVTTdTVUZGVFN4VFFVRlRPMUZCUTJRc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eFBRVUZQTEVOQlFVRTdTVUZETVVJc1EwRkJRenRKUVVWTkxGTkJRVk03VVVGRFpDeEpRVUZKTEVsQlFVa3NRMEZCUXl4VFFVRlRMRXRCUVVzc1QwRkJUenRaUVVGRkxFOUJRVTA3VVVGRGRFTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVUU3U1VGRGRrSXNRMEZCUXp0SlFVVk5MRWxCUVVrN1VVRkRWQ3hKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUVR0SlFVTjJRaXhEUVVGRE8wbEJSVTBzVFVGQlRTeERRVUZETEZOQlFXbENPMUZCUXpkQ0xFbEJRVWtzU1VGQlNTeERRVUZETEZOQlFWTXNTMEZCU3l4SlFVRkpPMWxCUVVVc1QwRkJUVHRoUVVNNVFpeEpRVUZKTEVsQlFVa3NRMEZCUXl4VFFVRlRMRXRCUVVzc1RVRkJUVHRaUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETEVsQlFVa3NTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhUUVVGVExFTkJRVUU3WVVGREwwUXNTVUZCU1N4SlFVRkpMRU5CUVVNc1UwRkJVeXhMUVVGTExFOUJRVTg3V1VGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzVTBGQlV5eERRVUZCTzFGQlJYSkZMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVkQlFVY3NTVUZCU1N4RFFVRkRMRTlCUVU4N1dVRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVFN1VVRkRjRVFzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEZOQlFWTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUenRaUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVFN1NVRkRPVWNzUTBGQlF6dEpRVVZOTEVsQlFVa3NRMEZCUXl4UFFVRnBRenRSUVVNelF5eE5RVUZOTEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hMUVVGTExFVkJRVVVzVFVGQlRTeEZRVUZGTEVkQlFVY3NTVUZCU1N4RFFVRkJPMUZCUTNCRExFOUJRVThzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hMUVVGTExFVkJRVVVzVFVGQlRTeERRVUZETEVOQlFVRTdTVUZEZGtNc1EwRkJRenREUVVOR0luMD0iLCJleHBvcnQgdmFyIEtFWVM7XHJcbihmdW5jdGlvbiAoS0VZUykge1xyXG4gICAgS0VZU1tcIkxFRlRcIl0gPSBcIkFycm93TGVmdFwiO1xyXG4gICAgS0VZU1tcIlJJR0hUXCJdID0gXCJBcnJvd1JpZ2h0XCI7XHJcbn0pKEtFWVMgfHwgKEtFWVMgPSB7fSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laVzUxYlhNdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk5emNtTXZaVzUxYlhNdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVFVGQlRTeERRVUZPTEVsQlFWa3NTVUZIV0R0QlFVaEVMRmRCUVZrc1NVRkJTVHRKUVVOa0xEQkNRVUZyUWl4RFFVRkJPMGxCUTJ4Q0xEUkNRVUZ2UWl4RFFVRkJPMEZCUTNSQ0xFTkJRVU1zUlVGSVZ5eEpRVUZKTEV0QlFVb3NTVUZCU1N4UlFVZG1JbjA9IiwiaW1wb3J0IElucHV0SGFuZGxlciBmcm9tICcuL0lucHV0SGFuZGxlcic7XHJcbmltcG9ydCBQYWRkbGUgZnJvbSAnLi9QYWRkbGUnO1xyXG5jb25zdCBHQU1FX1dJRFRIID0gOTAwO1xyXG5jb25zdCBHQU1FX0hFSUdIVCA9IDYwMDtcclxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NjcmVlbicpO1xyXG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbmNvbnN0IHBhZGRsZSA9IG5ldyBQYWRkbGUoR0FNRV9XSURUSCwgR0FNRV9IRUlHSFQpO1xyXG5uZXcgSW5wdXRIYW5kbGVyKHtcclxuICAgIGFycm93TGVmdFByZXNzZWQ6ICgpID0+IHBhZGRsZS5tb3ZlTGVmdCgpLFxyXG4gICAgYXJyb3dMZWZ0UmVsZWFzZWQ6ICgpID0+IHBhZGRsZS5zdG9wTGVmdCgpLFxyXG4gICAgYXJyb3dSaWdodFByZXNzZWQ6ICgpID0+IHBhZGRsZS5tb3ZlUmlnaHQoKSxcclxuICAgIGFycm93UmlnaHRSZWxlYXNlZDogKCkgPT4gcGFkZGxlLnN0b3BSaWdodCgpLFxyXG59KTtcclxubGV0IGxhc3RUaW1lID0gMDtcclxuZnVuY3Rpb24gZ2FtZUxvb3AodGltZXN0YW1wKSB7XHJcbiAgICBsZXQgZGVsdGFUaW1lID0gdGltZXN0YW1wIC0gbGFzdFRpbWU7XHJcbiAgICBsYXN0VGltZSA9IHRpbWVzdGFtcDtcclxuICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIEdBTUVfV0lEVEgsIEdBTUVfSEVJR0hUKTtcclxuICAgIHBhZGRsZS51cGRhdGUoZGVsdGFUaW1lKTtcclxuICAgIHBhZGRsZS5kcmF3KGNvbnRleHQpO1xyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn1cclxuZ2FtZUxvb3AoMSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFXNWtaWGd1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTl6Y21NdmFXNWtaWGd1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNUMEZCVHl4WlFVRlpMRTFCUVUwc1owSkJRV2RDTEVOQlFVRTdRVUZEZWtNc1QwRkJUeXhOUVVGTkxFMUJRVTBzVlVGQlZTeERRVUZCTzBGQlJUZENMRTFCUVUwc1ZVRkJWU3hIUVVGSExFZEJRVWNzUTBGQlFUdEJRVU4wUWl4TlFVRk5MRmRCUVZjc1IwRkJSeXhIUVVGSExFTkJRVUU3UVVGRmRrSXNUVUZCVFN4TlFVRk5MRWRCUVVjc1VVRkJVU3hEUVVGRExHRkJRV0VzUTBGQmIwSXNVMEZCVXl4RFFVRkZMRU5CUVVFN1FVRkRjRVVzVFVGQlRTeFBRVUZQTEVkQlFVY3NUVUZCVFN4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVVVzUTBGQlFUdEJRVVY0UXl4TlFVRk5MRTFCUVUwc1IwRkJSeXhKUVVGSkxFMUJRVTBzUTBGQlF5eFZRVUZWTEVWQlFVVXNWMEZCVnl4RFFVRkRMRU5CUVVFN1FVRkZiRVFzU1VGQlNTeFpRVUZaTEVOQlFVTTdTVUZEWml4blFrRkJaMElzUlVGQlJTeEhRVUZITEVWQlFVVXNRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hGUVVGRk8wbEJRM3BETEdsQ1FVRnBRaXhGUVVGRkxFZEJRVWNzUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRVZCUVVVN1NVRkRNVU1zYVVKQlFXbENMRVZCUVVVc1IwRkJSeXhGUVVGRkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNSVUZCUlR0SlFVTXpReXhyUWtGQmEwSXNSVUZCUlN4SFFVRkhMRVZCUVVVc1EwRkJReXhOUVVGTkxFTkJRVU1zVTBGQlV5eEZRVUZGTzBOQlF6ZERMRU5CUVVNc1EwRkJRVHRCUVVWR0xFbEJRVWtzVVVGQlVTeEhRVUZITEVOQlFVTXNRMEZCUVR0QlFVTm9RaXhUUVVGVExGRkJRVkVzUTBGQlF5eFRRVUU0UWp0SlFVTTVReXhKUVVGSkxGTkJRVk1zUjBGQlJ5eFRRVUZUTEVkQlFVY3NVVUZCVVN4RFFVRkJPMGxCUTNCRExGRkJRVkVzUjBGQlJ5eFRRVUZUTEVOQlFVRTdTVUZGY0VJc1QwRkJUeXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRlZCUVZVc1JVRkJSU3hYUVVGWExFTkJRVU1zUTBGQlFUdEpRVVZvUkN4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZCTzBsQlEzaENMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVRTdTVUZGY0VJc1RVRkJUU3hEUVVGRExIRkNRVUZ4UWl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGQk8wRkJRM2hETEVOQlFVTTdRVUZGUkN4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVUVpZlE9PSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2luZGV4LnRzXCIpO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==