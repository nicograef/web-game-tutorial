/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Ball.ts":
/*!*********************!*\
  !*** ./src/Ball.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Ball)
/* harmony export */ });
class Ball {
    constructor(game) {
        this.game = game;
        this.radius = 10;
        this.speed = 80;
        this.vx = 1;
        this.vy = -1;
        this.x = (this.game.width - this.radius) / 2;
        this.y = (this.game.height - this.radius) / 2;
    }
    update(deltaTime) {
        this.x += (this.vx * this.speed) / deltaTime;
        this.y += (this.vy * this.speed) / deltaTime;
        // left border
        if (this.x - this.radius < 0) {
            this.x = this.radius;
            this.vx = -this.vx;
        }
        // right border
        if (this.x + this.radius > this.game.width) {
            this.x = this.game.width - this.radius;
            this.vx = -this.vx;
        }
        // top border
        if (this.y < 0 + this.radius) {
            this.y = this.radius;
            this.vy = -this.vy;
        }
        // bottom border
        if (this.y > this.game.height - this.radius) {
            // this.y = this.game.height - this.radius
            // this.vy = -this.vy
        }
    }
    draw(context) {
        const { x, y, radius } = this;
        context.beginPath();
        context.arc(x, y, radius, 0, 2 * Math.PI);
        context.fill();
        context.closePath();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFsbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9CYWxsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sQ0FBQyxPQUFPLE9BQU8sSUFBSTtJQVF2QixZQUFvQixJQUFVO1FBQVYsU0FBSSxHQUFKLElBQUksQ0FBTTtRQVB2QixXQUFNLEdBQUcsRUFBRSxDQUFBO1FBQ1YsVUFBSyxHQUFHLEVBQUUsQ0FBQTtRQUdWLE9BQUUsR0FBRyxDQUFDLENBQUE7UUFDUCxPQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7UUFHWixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQWlCO1FBQzdCLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUE7UUFDNUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLFNBQVMsQ0FBQTtRQUU1QyxjQUFjO1FBQ2QsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzVCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtZQUNwQixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQTtTQUNuQjtRQUVELGVBQWU7UUFDZixJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUMxQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUE7WUFDdEMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7U0FDbkI7UUFFRCxhQUFhO1FBQ2IsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQzVCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtZQUNwQixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQTtTQUNuQjtRQUVELGdCQUFnQjtRQUNoQixJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMzQywwQ0FBMEM7WUFDMUMscUJBQXFCO1NBQ3RCO0lBQ0gsQ0FBQztJQUVNLElBQUksQ0FBQyxPQUFpQztRQUMzQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUE7UUFDN0IsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDekMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFBO1FBQ2QsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO0lBQ3JCLENBQUM7Q0FDRiJ9

/***/ }),

/***/ "./src/Game.ts":
/*!*********************!*\
  !*** ./src/Game.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Game)
/* harmony export */ });
/* harmony import */ var _InputHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InputHandler */ "./src/InputHandler.ts");
/* harmony import */ var _Ball__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Ball */ "./src/Ball.ts");
/* harmony import */ var _Paddle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Paddle */ "./src/Paddle.ts");



class Game {
    constructor(canvas) {
        this.lastTimestamp = 0;
        this.context = canvas.getContext('2d');
        this.height = canvas.height;
        this.width = canvas.width;
        this.paddle = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this);
        this.ball = new _Ball__WEBPACK_IMPORTED_MODULE_1__.default(this);
        this.inputHandler = new _InputHandler__WEBPACK_IMPORTED_MODULE_0__.default({
            arrowLeftPressed: () => this.paddle.moveLeft(),
            arrowLeftReleased: () => this.paddle.stop('left'),
            arrowRightPressed: () => this.paddle.moveRight(),
            arrowRightReleased: () => this.paddle.stop('right'),
        });
        this.inputHandler.setupAllListeners();
        this.loop(1);
    }
    restart() {
        this.paddle = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this);
        this.ball = new _Ball__WEBPACK_IMPORTED_MODULE_1__.default(this);
        // this.inputHandler.setupAllListeners()
        this.loop(1);
    }
    stop() {
        // this.inputHandler.cleanupAllListeners()
        setTimeout(this.restart.bind(this), 1000);
    }
    update(deltaTime) {
        this.paddle.update(deltaTime);
        this.ball.update(deltaTime);
        if (this.isBallOnPaddle()) {
            this.ball.vy = -1;
        }
    }
    draw() {
        this.ball.draw(this.context);
        this.paddle.draw(this.context);
    }
    clear() {
        this.context.clearRect(0, 0, this.width, this.height);
    }
    loop(timestamp) {
        const deltaTime = timestamp - this.lastTimestamp;
        this.lastTimestamp = timestamp;
        this.clear();
        this.update(deltaTime);
        this.draw();
        if (this.hasBallFallenThrough()) {
            this.stop();
            return;
        }
        window.requestAnimationFrame(this.loop.bind(this));
    }
    isBallOnPaddle() {
        return (this.ball.x >= this.paddle.x &&
            this.ball.x <= this.paddle.x + this.paddle.width &&
            this.ball.y + this.ball.radius >= this.paddle.y);
    }
    hasBallFallenThrough() {
        return this.ball.y - this.ball.radius >= this.height;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9HYW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sWUFBWSxNQUFNLGdCQUFnQixDQUFBO0FBQ3pDLE9BQU8sSUFBSSxNQUFNLFFBQVEsQ0FBQTtBQUN6QixPQUFPLE1BQU0sTUFBTSxVQUFVLENBQUE7QUFFN0IsTUFBTSxDQUFDLE9BQU8sT0FBTyxJQUFJO0lBWXZCLFlBQVksTUFBeUI7UUFGN0Isa0JBQWEsR0FBRyxDQUFDLENBQUE7UUFHdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFBO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQTtRQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUE7UUFFekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUM5QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBRTFCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUM7WUFDbkMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7WUFDOUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ2pELGlCQUFpQixFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFO1lBQ2hELGtCQUFrQixFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztTQUNwRCxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixFQUFFLENB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

/***/ }),

/***/ "./src/InputHandler.ts":
/*!*****************************!*\
  !*** ./src/InputHandler.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ InputHandler)
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums */ "./src/enums.ts");

class InputHandler {
    constructor(handlers) {
        this.handlers = handlers;
        this.onKeyDown = this.keyDownListener.bind(this);
        this.onKeyUp = this.keyUpListener.bind(this);
    }
    setupAllListeners() {
        document.addEventListener('keydown', this.onKeyDown);
        document.addEventListener('keyup', this.onKeyUp);
        return this.cleanupAllListeners;
    }
    cleanupAllListeners() {
        document.removeEventListener('keydown', this.onKeyDown);
        document.removeEventListener('keyup', this.onKeyUp);
    }
    keyDownListener(keyEvent) {
        if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
            this.handlers.arrowLeftPressed();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
            this.handlers.arrowRightPressed();
    }
    keyUpListener(keyEvent) {
        if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
            this.handlers.arrowLeftReleased();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
            this.handlers.arrowRightReleased();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXRIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0lucHV0SGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBUzlCLE1BQU0sQ0FBQyxPQUFPLE9BQU8sWUFBWTtJQUkvQixZQUFvQixRQUF3QjtRQUF4QixhQUFRLEdBQVIsUUFBUSxDQUFnQjtRQUMxQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ2hELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDOUMsQ0FBQztJQUVNLGlCQUFpQjtRQUN0QixRQUFRLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNwRCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNoRCxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQTtJQUNqQyxDQUFDO0lBRU0sbUJBQW1CO1FBQ3hCLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3ZELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3JELENBQUM7SUFFTyxlQUFlLENBQUMsUUFBdUI7UUFDN0MsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFBO2FBQzVELElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtJQUMxRSxDQUFDO0lBRU8sYUFBYSxDQUFDLFFBQXVCO1FBQzNDLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTtZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTthQUM3RCxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEtBQUs7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixFQUFFLENBQUE7SUFDM0UsQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/Paddle.ts":
/*!***********************!*\
  !*** ./src/Paddle.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Paddle)
/* harmony export */ });
class Paddle {
    constructor(game) {
        this.game = game;
        this.width = 150;
        this.height = 25;
        this.padding = 5;
        this.speed = 80;
        this.x = (this.game.width - this.width) / 2;
        this.y = this.game.height - this.height - this.padding;
        this.direction = null;
    }
    moveLeft() {
        this.direction = 'left';
    }
    moveRight() {
        this.direction = 'right';
    }
    stop(direction = null) {
        if (this.direction === direction || direction === null)
            this.direction = null;
    }
    update(deltaTime) {
        if (this.direction === null)
            return;
        else if (this.direction === 'left')
            this.x -= this.speed / deltaTime;
        else if (this.direction === 'right')
            this.x += this.speed / deltaTime;
        // left border
        if (this.x < 0 + this.padding) {
            this.x = this.padding;
        }
        // right border
        if (this.x + this.width > this.game.width - this.padding) {
            this.x = this.game.width - this.width - this.padding;
        }
    }
    draw(context) {
        const { x, y, width, height } = this;
        context.fillRect(x, y, width, height);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFkZGxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1BhZGRsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxNQUFNLENBQUMsT0FBTyxPQUFPLE1BQU07SUFTekIsWUFBb0IsSUFBVTtRQUFWLFNBQUksR0FBSixJQUFJLENBQU07UUFSdkIsVUFBSyxHQUFHLEdBQUcsQ0FBQTtRQUNYLFdBQU0sR0FBRyxFQUFFLENBQUE7UUFDVixZQUFPLEdBQUcsQ0FBQyxDQUFBO1FBQ1gsVUFBSyxHQUFHLEVBQUUsQ0FBQTtRQU1oQixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMzQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtRQUN0RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sUUFBUTtRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO0lBQ3pCLENBQUM7SUFFTSxTQUFTO1FBQ2QsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUE7SUFDMUIsQ0FBQztJQUVNLElBQUksQ0FBQyxZQUE4QixJQUFJO1FBQzVDLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxTQUFTLElBQUksU0FBUyxLQUFLLElBQUk7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUMvRSxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQWlCO1FBQzdCLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJO1lBQUUsT0FBTTthQUM5QixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTTtZQUFFLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUE7YUFDL0QsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE9BQU87WUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFBO1FBRXJFLGNBQWM7UUFDZCxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDN0IsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO1NBQ3RCO1FBRUQsZUFBZTtRQUNmLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDeEQsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7U0FDckQ7SUFDSCxDQUFDO0lBRU0sSUFBSSxDQUFDLE9BQWlDO1FBQzNDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUE7UUFDcEMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0NBQ0YifQ==

/***/ }),

/***/ "./src/enums.ts":
/*!**********************!*\
  !*** ./src/enums.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KEYS": () => (/* binding */ KEYS)
/* harmony export */ });
var KEYS;
(function (KEYS) {
    KEYS["LEFT"] = "ArrowLeft";
    KEYS["RIGHT"] = "ArrowRight";
})(KEYS || (KEYS = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZW51bXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFOLElBQVksSUFHWDtBQUhELFdBQVksSUFBSTtJQUNkLDBCQUFrQixDQUFBO0lBQ2xCLDRCQUFvQixDQUFBO0FBQ3RCLENBQUMsRUFIVyxJQUFJLEtBQUosSUFBSSxRQUdmIn0=

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Game */ "./src/Game.ts");

const canvas = document.querySelector('#screen');
new _Game__WEBPACK_IMPORTED_MODULE_0__.default(canvas);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxJQUFJLE1BQU0sUUFBUSxDQUFBO0FBRXpCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFNBQVMsQ0FBRSxDQUFBO0FBRXBFLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBIn0=

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9CYWxsLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL1BhZGRsZS50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9lbnVtcy50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHVyRTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQ0Q7QUFDaEI7QUFDSTtBQUNmO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw0Q0FBTTtBQUNoQyx3QkFBd0IsMENBQUk7QUFDNUIsZ0NBQWdDLGtEQUFZO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRDQUFNO0FBQ2hDLHdCQUF3QiwwQ0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsMnlHOzs7Ozs7Ozs7Ozs7Ozs7QUNqRVo7QUFDaEI7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNkNBQVM7QUFDdkM7QUFDQSxtQ0FBbUMsOENBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZDQUFTO0FBQ3ZDO0FBQ0EsbUNBQW1DLDhDQUFVO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxtL0M7Ozs7Ozs7Ozs7Ozs7O0FDN0I1QjtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLCsvRDs7Ozs7Ozs7Ozs7Ozs7QUMxQ3BDO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQkFBb0I7QUFDckIsMkNBQTJDLG1TOzs7Ozs7Ozs7Ozs7QUNMakI7QUFDMUI7QUFDQSxJQUFJLDBDQUFJO0FBQ1IsMkNBQTJDLG1UOzs7Ozs7VUNIM0M7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0Esd0NBQXdDLHlDQUF5QztXQUNqRjtXQUNBO1dBQ0EsRTs7Ozs7V0NQQSx3Rjs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSxzREFBc0Qsa0JBQWtCO1dBQ3hFO1dBQ0EsK0NBQStDLGNBQWM7V0FDN0QsRTs7OztVQ05BO1VBQ0E7VUFDQTtVQUNBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhbGwge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSAxMDtcclxuICAgICAgICB0aGlzLnNwZWVkID0gODA7XHJcbiAgICAgICAgdGhpcy52eCA9IDE7XHJcbiAgICAgICAgdGhpcy52eSA9IC0xO1xyXG4gICAgICAgIHRoaXMueCA9ICh0aGlzLmdhbWUud2lkdGggLSB0aGlzLnJhZGl1cykgLyAyO1xyXG4gICAgICAgIHRoaXMueSA9ICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5yYWRpdXMpIC8gMjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpIHtcclxuICAgICAgICB0aGlzLnggKz0gKHRoaXMudnggKiB0aGlzLnNwZWVkKSAvIGRlbHRhVGltZTtcclxuICAgICAgICB0aGlzLnkgKz0gKHRoaXMudnkgKiB0aGlzLnNwZWVkKSAvIGRlbHRhVGltZTtcclxuICAgICAgICAvLyBsZWZ0IGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnggLSB0aGlzLnJhZGl1cyA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5yYWRpdXM7XHJcbiAgICAgICAgICAgIHRoaXMudnggPSAtdGhpcy52eDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmlnaHQgYm9yZGVyXHJcbiAgICAgICAgaWYgKHRoaXMueCArIHRoaXMucmFkaXVzID4gdGhpcy5nYW1lLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMucmFkaXVzO1xyXG4gICAgICAgICAgICB0aGlzLnZ4ID0gLXRoaXMudng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRvcCBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy55IDwgMCArIHRoaXMucmFkaXVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMucmFkaXVzO1xyXG4gICAgICAgICAgICB0aGlzLnZ5ID0gLXRoaXMudnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGJvdHRvbSBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy55ID4gdGhpcy5nYW1lLmhlaWdodCAtIHRoaXMucmFkaXVzKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLnJhZGl1c1xyXG4gICAgICAgICAgICAvLyB0aGlzLnZ5ID0gLXRoaXMudnlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3KGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHJhZGl1cyB9ID0gdGhpcztcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pUW1Gc2JDNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlDWVd4c0xuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVVZCTEUxQlFVMHNRMEZCUXl4UFFVRlBMRTlCUVU4c1NVRkJTVHRKUVZGMlFpeFpRVUZ2UWl4SlFVRlZPMUZCUVZZc1UwRkJTU3hIUVVGS0xFbEJRVWtzUTBGQlRUdFJRVkIyUWl4WFFVRk5MRWRCUVVjc1JVRkJSU3hEUVVGQk8xRkJRMVlzVlVGQlN5eEhRVUZITEVWQlFVVXNRMEZCUVR0UlFVZFdMRTlCUVVVc1IwRkJSeXhEUVVGRExFTkJRVUU3VVVGRFVDeFBRVUZGTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVFN1VVRkhXaXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRVHRSUVVNMVF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlFUdEpRVU12UXl4RFFVRkRPMGxCUlUwc1RVRkJUU3hEUVVGRExGTkJRV2xDTzFGQlF6ZENMRWxCUVVrc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4SFFVRkhMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eFRRVUZUTEVOQlFVRTdVVUZETlVNc1NVRkJTU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRWRCUVVjc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eEhRVUZITEZOQlFWTXNRMEZCUVR0UlFVVTFReXhqUVVGak8xRkJRMlFzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzUTBGQlF5eEZRVUZGTzFsQlF6VkNMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUVR0WlFVTndRaXhKUVVGSkxFTkJRVU1zUlVGQlJTeEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJRVHRUUVVOdVFqdFJRVVZFTEdWQlFXVTdVVUZEWml4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUlVGQlJUdFpRVU14UXl4SlFVRkpMRU5CUVVNc1EwRkJReXhIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVUU3V1VGRGRFTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVRTdVMEZEYmtJN1VVRkZSQ3hoUVVGaE8xRkJRMklzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeEZRVUZGTzFsQlF6VkNMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUVR0WlFVTndRaXhKUVVGSkxFTkJRVU1zUlVGQlJTeEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJRVHRUUVVOdVFqdFJRVVZFTEdkQ1FVRm5RanRSUVVOb1FpeEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1JVRkJSVHRaUVVNelF5d3dRMEZCTUVNN1dVRkRNVU1zY1VKQlFYRkNPMU5CUTNSQ08wbEJRMGdzUTBGQlF6dEpRVVZOTEVsQlFVa3NRMEZCUXl4UFFVRnBRenRSUVVNelF5eE5RVUZOTEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hOUVVGTkxFVkJRVVVzUjBGQlJ5eEpRVUZKTEVOQlFVRTdVVUZETjBJc1QwRkJUeXhEUVVGRExGTkJRVk1zUlVGQlJTeERRVUZCTzFGQlEyNUNMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4TlFVRk5MRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVFN1VVRkRla01zVDBGQlR5eERRVUZETEVsQlFVa3NSVUZCUlN4RFFVRkJPMUZCUTJRc1QwRkJUeXhEUVVGRExGTkJRVk1zUlVGQlJTeERRVUZCTzBsQlEzSkNMRU5CUVVNN1EwRkRSaUo5IiwiaW1wb3J0IElucHV0SGFuZGxlciBmcm9tICcuL0lucHV0SGFuZGxlcic7XHJcbmltcG9ydCBCYWxsIGZyb20gJy4vQmFsbCc7XHJcbmltcG9ydCBQYWRkbGUgZnJvbSAnLi9QYWRkbGUnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xyXG4gICAgICAgIHRoaXMubGFzdFRpbWVzdGFtcCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5wYWRkbGUgPSBuZXcgUGFkZGxlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYmFsbCA9IG5ldyBCYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRIYW5kbGVyID0gbmV3IElucHV0SGFuZGxlcih7XHJcbiAgICAgICAgICAgIGFycm93TGVmdFByZXNzZWQ6ICgpID0+IHRoaXMucGFkZGxlLm1vdmVMZWZ0KCksXHJcbiAgICAgICAgICAgIGFycm93TGVmdFJlbGVhc2VkOiAoKSA9PiB0aGlzLnBhZGRsZS5zdG9wKCdsZWZ0JyksXHJcbiAgICAgICAgICAgIGFycm93UmlnaHRQcmVzc2VkOiAoKSA9PiB0aGlzLnBhZGRsZS5tb3ZlUmlnaHQoKSxcclxuICAgICAgICAgICAgYXJyb3dSaWdodFJlbGVhc2VkOiAoKSA9PiB0aGlzLnBhZGRsZS5zdG9wKCdyaWdodCcpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRIYW5kbGVyLnNldHVwQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5sb29wKDEpO1xyXG4gICAgfVxyXG4gICAgcmVzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcyk7XHJcbiAgICAgICAgdGhpcy5iYWxsID0gbmV3IEJhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gdGhpcy5pbnB1dEhhbmRsZXIuc2V0dXBBbGxMaXN0ZW5lcnMoKVxyXG4gICAgICAgIHRoaXMubG9vcCgxKTtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5pbnB1dEhhbmRsZXIuY2xlYW51cEFsbExpc3RlbmVycygpXHJcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlc3RhcnQuYmluZCh0aGlzKSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5wYWRkbGUudXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmFsbE9uUGFkZGxlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWxsLnZ5ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhdygpIHtcclxuICAgICAgICB0aGlzLmJhbGwuZHJhdyh0aGlzLmNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGFkZGxlLmRyYXcodGhpcy5jb250ZXh0KTtcclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgbG9vcCh0aW1lc3RhbXApIHtcclxuICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RUaW1lc3RhbXA7XHJcbiAgICAgICAgdGhpcy5sYXN0VGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgIGlmICh0aGlzLmhhc0JhbGxGYWxsZW5UaHJvdWdoKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmxvb3AuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBpc0JhbGxPblBhZGRsZSgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuYmFsbC54ID49IHRoaXMucGFkZGxlLnggJiZcclxuICAgICAgICAgICAgdGhpcy5iYWxsLnggPD0gdGhpcy5wYWRkbGUueCArIHRoaXMucGFkZGxlLndpZHRoICYmXHJcbiAgICAgICAgICAgIHRoaXMuYmFsbC55ICsgdGhpcy5iYWxsLnJhZGl1cyA+PSB0aGlzLnBhZGRsZS55KTtcclxuICAgIH1cclxuICAgIGhhc0JhbGxGYWxsZW5UaHJvdWdoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhbGwueSAtIHRoaXMuYmFsbC5yYWRpdXMgPj0gdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pUjJGdFpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlIWVcxbExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEU5QlFVOHNXVUZCV1N4TlFVRk5MR2RDUVVGblFpeERRVUZCTzBGQlEzcERMRTlCUVU4c1NVRkJTU3hOUVVGTkxGRkJRVkVzUTBGQlFUdEJRVU42UWl4UFFVRlBMRTFCUVUwc1RVRkJUU3hWUVVGVkxFTkJRVUU3UVVGRk4wSXNUVUZCVFN4RFFVRkRMRTlCUVU4c1QwRkJUeXhKUVVGSk8wbEJXWFpDTEZsQlFWa3NUVUZCZVVJN1VVRkdOMElzYTBKQlFXRXNSMEZCUnl4RFFVRkRMRU5CUVVFN1VVRkhka0lzU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4TlFVRk5MRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlJTeERRVUZCTzFGQlEzWkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUVR0UlFVTXpRaXhKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVFN1VVRkZla0lzU1VGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlFUdFJRVU01UWl4SlFVRkpMRU5CUVVNc1NVRkJTU3hIUVVGSExFbEJRVWtzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkJPMUZCUlRGQ0xFbEJRVWtzUTBGQlF5eFpRVUZaTEVkQlFVY3NTVUZCU1N4WlFVRlpMRU5CUVVNN1dVRkRia01zWjBKQlFXZENMRVZCUVVVc1IwRkJSeXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRVZCUVVVN1dVRkRPVU1zYVVKQlFXbENMRVZCUVVVc1IwRkJSeXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRE8xbEJRMnBFTEdsQ1FVRnBRaXhGUVVGRkxFZEJRVWNzUlVGQlJTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhGUVVGRk8xbEJRMmhFTEd0Q1FVRnJRaXhGUVVGRkxFZEJRVWNzUlVGQlJTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF6dFRRVU53UkN4RFFVRkRMRU5CUVVFN1VVRkZSaXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEdsQ1FVRnBRaXhGUVVGRkxFTkJRVUU3VVVGRmNrTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlFUdEpRVU5rTEVOQlFVTTdTVUZGVHl4UFFVRlBPMUZCUTJJc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRVHRSUVVNNVFpeEpRVUZKTEVOQlFVTXNTVUZCU1N4SFFVRkhMRWxCUVVrc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZCTzFGQlF6RkNMSGREUVVGM1F6dFJRVU40UXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZCTzBsQlEyUXNRMEZCUXp0SlFVVlBMRWxCUVVrN1VVRkRWaXd3UTBGQk1FTTdVVUZETVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZCTzBsQlF6TkRMRU5CUVVNN1NVRkZUeXhOUVVGTkxFTkJRVU1zVTBGQmFVSTdVVUZET1VJc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVFN1VVRkROMElzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVUU3VVVGRk0wSXNTVUZCU1N4SlFVRkpMRU5CUVVNc1kwRkJZeXhGUVVGRkxFVkJRVVU3V1VGRGVrSXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVRTdVMEZEYkVJN1NVRkRTQ3hEUVVGRE8wbEJSVThzU1VGQlNUdFJRVU5XTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUVR0UlFVTTFRaXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVUU3U1VGRGFFTXNRMEZCUXp0SlFVVlBMRXRCUVVzN1VVRkRXQ3hKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFbEJRVWtzUTBGQlF5eExRVUZMTEVWQlFVVXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGQk8wbEJRM1pFTEVOQlFVTTdTVUZGVHl4SlFVRkpMRU5CUVVNc1UwRkJPRUk3VVVGRGVrTXNUVUZCVFN4VFFVRlRMRWRCUVVjc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVRTdVVUZEYUVRc1NVRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5eFRRVUZUTEVOQlFVRTdVVUZGT1VJc1NVRkJTU3hEUVVGRExFdEJRVXNzUlVGQlJTeERRVUZCTzFGQlExb3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlFUdFJRVU4wUWl4SlFVRkpMRU5CUVVNc1NVRkJTU3hGUVVGRkxFTkJRVUU3VVVGRldDeEpRVUZKTEVsQlFVa3NRMEZCUXl4dlFrRkJiMElzUlVGQlJTeEZRVUZGTzFsQlF5OUNMRWxCUVVrc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlFUdFpRVU5ZTEU5QlFVMDdVMEZEVUR0UlFVVkVMRTFCUVUwc1EwRkJReXh4UWtGQmNVSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkJPMGxCUTNCRUxFTkJRVU03U1VGRlR5eGpRVUZqTzFGQlEzQkNMRTlCUVU4c1EwRkRUQ3hKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNTVUZCU1N4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03V1VGRE5VSXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFbEJRVWtzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZMTzFsQlEyaEVMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hKUVVGSkxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVTm9SQ3hEUVVGQk8wbEJRMGdzUTBGQlF6dEpRVVZQTEc5Q1FVRnZRanRSUVVNeFFpeFBRVUZQTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVUU3U1VGRGRFUXNRMEZCUXp0RFFVTkdJbjA9IiwiaW1wb3J0IHsgS0VZUyB9IGZyb20gJy4vZW51bXMnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dEhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoaGFuZGxlcnMpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnM7XHJcbiAgICAgICAgdGhpcy5vbktleURvd24gPSB0aGlzLmtleURvd25MaXN0ZW5lci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25LZXlVcCA9IHRoaXMua2V5VXBMaXN0ZW5lci5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgc2V0dXBBbGxMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW51cEFsbExpc3RlbmVycztcclxuICAgIH1cclxuICAgIGNsZWFudXBBbGxMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcCk7XHJcbiAgICB9XHJcbiAgICBrZXlEb3duTGlzdGVuZXIoa2V5RXZlbnQpIHtcclxuICAgICAgICBpZiAoa2V5RXZlbnQuY29kZSA9PT0gS0VZUy5MRUZUKVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmFycm93TGVmdFByZXNzZWQoKTtcclxuICAgICAgICBlbHNlIGlmIChrZXlFdmVudC5jb2RlID09PSBLRVlTLlJJR0hUKVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmFycm93UmlnaHRQcmVzc2VkKCk7XHJcbiAgICB9XHJcbiAgICBrZXlVcExpc3RlbmVyKGtleUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGtleUV2ZW50LmNvZGUgPT09IEtFWVMuTEVGVClcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hcnJvd0xlZnRSZWxlYXNlZCgpO1xyXG4gICAgICAgIGVsc2UgaWYgKGtleUV2ZW50LmNvZGUgPT09IEtFWVMuUklHSFQpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYXJyb3dSaWdodFJlbGVhc2VkKCk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pU1c1d2RYUklZVzVrYkdWeUxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTGk0dmMzSmpMMGx1Y0hWMFNHRnVaR3hsY2k1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hQUVVGUExFVkJRVVVzU1VGQlNTeEZRVUZGTEUxQlFVMHNVMEZCVXl4RFFVRkJPMEZCVXpsQ0xFMUJRVTBzUTBGQlF5eFBRVUZQTEU5QlFVOHNXVUZCV1R0SlFVa3ZRaXhaUVVGdlFpeFJRVUYzUWp0UlFVRjRRaXhoUVVGUkxFZEJRVklzVVVGQlVTeERRVUZuUWp0UlFVTXhReXhKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUXl4bFFVRmxMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZCTzFGQlEyaEVMRWxCUVVrc1EwRkJReXhQUVVGUExFZEJRVWNzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVUU3U1VGRE9VTXNRMEZCUXp0SlFVVk5MR2xDUVVGcFFqdFJRVU4wUWl4UlFVRlJMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNVMEZCVXl4RlFVRkZMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlFUdFJRVU53UkN4UlFVRlJMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNUMEZCVHl4RlFVRkZMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlFUdFJRVU5vUkN4UFFVRlBMRWxCUVVrc1EwRkJReXh0UWtGQmJVSXNRMEZCUVR0SlFVTnFReXhEUVVGRE8wbEJSVTBzYlVKQlFXMUNPMUZCUTNoQ0xGRkJRVkVzUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhUUVVGVExFVkJRVVVzU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkJPMUZCUTNaRUxGRkJRVkVzUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhQUVVGUExFVkJRVVVzU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkJPMGxCUTNKRUxFTkJRVU03U1VGRlR5eGxRVUZsTEVOQlFVTXNVVUZCZFVJN1VVRkROME1zU1VGQlNTeFJRVUZSTEVOQlFVTXNTVUZCU1N4TFFVRkxMRWxCUVVrc1EwRkJReXhKUVVGSk8xbEJRVVVzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4blFrRkJaMElzUlVGQlJTeERRVUZCTzJGQlF6VkVMRWxCUVVrc1VVRkJVU3hEUVVGRExFbEJRVWtzUzBGQlN5eEpRVUZKTEVOQlFVTXNTMEZCU3p0WlFVRkZMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zYVVKQlFXbENMRVZCUVVVc1EwRkJRVHRKUVVNeFJTeERRVUZETzBsQlJVOHNZVUZCWVN4RFFVRkRMRkZCUVhWQ08xRkJRek5ETEVsQlFVa3NVVUZCVVN4RFFVRkRMRWxCUVVrc1MwRkJTeXhKUVVGSkxFTkJRVU1zU1VGQlNUdFpRVUZGTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc2FVSkJRV2xDTEVWQlFVVXNRMEZCUVR0aFFVTTNSQ3hKUVVGSkxGRkJRVkVzUTBGQlF5eEpRVUZKTEV0QlFVc3NTVUZCU1N4RFFVRkRMRXRCUVVzN1dVRkJSU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEd0Q1FVRnJRaXhGUVVGRkxFTkJRVUU3U1VGRE0wVXNRMEZCUXp0RFFVTkdJbjA9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFkZGxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcclxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAxNTA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAyNTtcclxuICAgICAgICB0aGlzLnBhZGRpbmcgPSA1O1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSA4MDtcclxuICAgICAgICB0aGlzLnggPSAodGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyO1xyXG4gICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodCAtIHRoaXMucGFkZGluZztcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBtb3ZlTGVmdCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgIH1cclxuICAgIG1vdmVSaWdodCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdyaWdodCc7XHJcbiAgICB9XHJcbiAgICBzdG9wKGRpcmVjdGlvbiA9IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbiB8fCBkaXJlY3Rpb24gPT09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ2xlZnQnKVxyXG4gICAgICAgICAgICB0aGlzLnggLT0gdGhpcy5zcGVlZCAvIGRlbHRhVGltZTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0JylcclxuICAgICAgICAgICAgdGhpcy54ICs9IHRoaXMuc3BlZWQgLyBkZWx0YVRpbWU7XHJcbiAgICAgICAgLy8gbGVmdCBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy54IDwgMCArIHRoaXMucGFkZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJpZ2h0IGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnggKyB0aGlzLndpZHRoID4gdGhpcy5nYW1lLndpZHRoIC0gdGhpcy5wYWRkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMud2lkdGggLSB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhdyhjb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pVUdGa1pHeGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUxpNHZjM0pqTDFCaFpHUnNaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGSlFTeE5RVUZOTEVOQlFVTXNUMEZCVHl4UFFVRlBMRTFCUVUwN1NVRlRla0lzV1VGQmIwSXNTVUZCVlR0UlFVRldMRk5CUVVrc1IwRkJTaXhKUVVGSkxFTkJRVTA3VVVGU2RrSXNWVUZCU3l4SFFVRkhMRWRCUVVjc1EwRkJRVHRSUVVOWUxGZEJRVTBzUjBGQlJ5eEZRVUZGTEVOQlFVRTdVVUZEVml4WlFVRlBMRWRCUVVjc1EwRkJReXhEUVVGQk8xRkJRMWdzVlVGQlN5eEhRVUZITEVWQlFVVXNRMEZCUVR0UlFVMW9RaXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRVHRSUVVNelF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVsQlFVa3NRMEZCUXl4TlFVRk5MRWRCUVVjc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlFUdFJRVU4wUkN4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlFUdEpRVU4yUWl4RFFVRkRPMGxCUlUwc1VVRkJVVHRSUVVOaUxFbEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NUVUZCVFN4RFFVRkJPMGxCUTNwQ0xFTkJRVU03U1VGRlRTeFRRVUZUTzFGQlEyUXNTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhQUVVGUExFTkJRVUU3U1VGRE1VSXNRMEZCUXp0SlFVVk5MRWxCUVVrc1EwRkJReXhaUVVFNFFpeEpRVUZKTzFGQlF6VkRMRWxCUVVrc1NVRkJTU3hEUVVGRExGTkJRVk1zUzBGQlN5eFRRVUZUTEVsQlFVa3NVMEZCVXl4TFFVRkxMRWxCUVVrN1dVRkJSU3hKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUVR0SlFVTXZSU3hEUVVGRE8wbEJSVTBzVFVGQlRTeERRVUZETEZOQlFXbENPMUZCUXpkQ0xFbEJRVWtzU1VGQlNTeERRVUZETEZOQlFWTXNTMEZCU3l4SlFVRkpPMWxCUVVVc1QwRkJUVHRoUVVNNVFpeEpRVUZKTEVsQlFVa3NRMEZCUXl4VFFVRlRMRXRCUVVzc1RVRkJUVHRaUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETEVsQlFVa3NTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhUUVVGVExFTkJRVUU3WVVGREwwUXNTVUZCU1N4SlFVRkpMRU5CUVVNc1UwRkJVeXhMUVVGTExFOUJRVTg3V1VGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzVTBGQlV5eERRVUZCTzFGQlJYSkZMR05CUVdNN1VVRkRaQ3hKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVU3V1VGRE4wSXNTVUZCU1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZCTzFOQlEzUkNPMUZCUlVRc1pVRkJaVHRSUVVObUxFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVU3V1VGRGVFUXNTVUZCU1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NSMEZCUnl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVRTdVMEZEY2tRN1NVRkRTQ3hEUVVGRE8wbEJSVTBzU1VGQlNTeERRVUZETEU5QlFXbERPMUZCUXpORExFMUJRVTBzUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRXRCUVVzc1JVRkJSU3hOUVVGTkxFVkJRVVVzUjBGQlJ5eEpRVUZKTEVOQlFVRTdVVUZEY0VNc1QwRkJUeXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRXRCUVVzc1JVRkJSU3hOUVVGTkxFTkJRVU1zUTBGQlFUdEpRVU4yUXl4RFFVRkRPME5CUTBZaWZRPT0iLCJleHBvcnQgdmFyIEtFWVM7XHJcbihmdW5jdGlvbiAoS0VZUykge1xyXG4gICAgS0VZU1tcIkxFRlRcIl0gPSBcIkFycm93TGVmdFwiO1xyXG4gICAgS0VZU1tcIlJJR0hUXCJdID0gXCJBcnJvd1JpZ2h0XCI7XHJcbn0pKEtFWVMgfHwgKEtFWVMgPSB7fSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laVzUxYlhNdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk5emNtTXZaVzUxYlhNdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVFVGQlRTeERRVUZPTEVsQlFWa3NTVUZIV0R0QlFVaEVMRmRCUVZrc1NVRkJTVHRKUVVOa0xEQkNRVUZyUWl4RFFVRkJPMGxCUTJ4Q0xEUkNRVUZ2UWl4RFFVRkJPMEZCUTNSQ0xFTkJRVU1zUlVGSVZ5eEpRVUZKTEV0QlFVb3NTVUZCU1N4UlFVZG1JbjA9IiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9HYW1lJztcclxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NjcmVlbicpO1xyXG5uZXcgR2FtZShjYW52YXMpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lhVzVrWlhndWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk5emNtTXZhVzVrWlhndWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVDBGQlR5eEpRVUZKTEUxQlFVMHNVVUZCVVN4RFFVRkJPMEZCUlhwQ0xFMUJRVTBzVFVGQlRTeEhRVUZITEZGQlFWRXNRMEZCUXl4aFFVRmhMRU5CUVc5Q0xGTkJRVk1zUTBGQlJTeERRVUZCTzBGQlJYQkZMRWxCUVVrc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZCSW4wPSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgudHNcIik7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdleHBvcnRzJyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG4iXSwic291cmNlUm9vdCI6IiJ9