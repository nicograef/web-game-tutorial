/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Ball.ts":
/*!*********************!*\
  !*** ./src/Ball.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ Paddle
/* harmony export */ });
class Paddle {
    constructor(gameWidth, gameHeight) {
        this.gameWidth = gameWidth;
        this.gameHeight = gameHeight;
        this.radius = 10;
        this.padding = 1;
        this.speed = 50;
        this.vx = 1;
        this.vy = -1;
        this.x = (this.gameWidth - this.radius) / 2;
        this.y = (this.gameHeight - this.radius - this.padding) / 2;
        this.direction = null;
    }
    moveLeft() {
        this.direction = 'left';
    }
    stopLeft() {
        if (this.direction !== 'left')
            return;
        this.direction = null;
    }
    moveRight() {
        this.direction = 'right';
    }
    stopRight() {
        if (this.direction !== 'right')
            return;
        this.direction = null;
    }
    stop() {
        this.direction = null;
    }
    update(deltaTime) {
        this.x += (this.vx * this.speed) / deltaTime;
        this.y += (this.vy * this.speed) / deltaTime;
        // left border
        if (this.x - this.radius < 0 + this.padding) {
            this.x = this.radius + this.padding;
            this.vx = -this.vx;
        }
        // right border
        if (this.x + this.radius > this.gameWidth - this.padding) {
            this.x = this.gameWidth - this.radius - this.padding;
            this.vx = -this.vx;
        }
        // top border
        if (this.y < 0 + this.radius + this.padding) {
            this.y = this.radius + this.padding;
            this.vy = -this.vy;
        }
        // bottom border
        if (this.y > this.gameHeight - this.radius - this.padding) {
            // this.y = this.gameHeight - this.radius - this.padding
            // this.vy = -this.vy
        }
    }
    draw(context) {
        const { x, y, radius } = this;
        context.beginPath();
        context.arc(x, y, radius, 0, 2 * Math.PI);
        context.fill();
        context.closePath();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFsbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9CYWxsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sQ0FBQyxPQUFPLE9BQU8sTUFBTTtJQVV6QixZQUFvQixTQUFpQixFQUFVLFVBQWtCO1FBQTdDLGNBQVMsR0FBVCxTQUFTLENBQVE7UUFBVSxlQUFVLEdBQVYsVUFBVSxDQUFRO1FBVDFELFdBQU0sR0FBRyxFQUFFLENBQUE7UUFDVixZQUFPLEdBQUcsQ0FBQyxDQUFBO1FBQ1gsVUFBSyxHQUFHLEVBQUUsQ0FBQTtRQUdWLE9BQUUsR0FBRyxDQUFDLENBQUE7UUFDUCxPQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7UUFJWixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzNDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMzRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sUUFBUTtRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO0lBQ3pCLENBQUM7SUFFTSxRQUFRO1FBQ2IsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU07WUFBRSxPQUFNO1FBQ3JDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFBO0lBQ3ZCLENBQUM7SUFFTSxTQUFTO1FBQ2QsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUE7SUFDMUIsQ0FBQztJQUVNLFNBQVM7UUFDZCxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssT0FBTztZQUFFLE9BQU07UUFDdEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7SUFDdkIsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQWlCO1FBQzdCLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUE7UUFDNUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLFNBQVMsQ0FBQTtRQUU1QyxjQUFjO1FBQ2QsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDM0MsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7WUFDbkMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7U0FDbkI7UUFFRCxlQUFlO1FBQ2YsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ3hELElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7WUFDcEQsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7U0FDbkI7UUFFRCxhQUFhO1FBQ2IsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDM0MsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7WUFDbkMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7U0FDbkI7UUFFRCxnQkFBZ0I7UUFDaEIsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ3pELHdEQUF3RDtZQUN4RCxxQkFBcUI7U0FDdEI7SUFDSCxDQUFDO0lBRU0sSUFBSSxDQUFDLE9BQWlDO1FBQzNDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQTtRQUM3QixPQUFPLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUN6QyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUE7UUFDZCxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUE7SUFDckIsQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/Game.ts":
/*!*********************!*\
  !*** ./src/Game.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ Game
/* harmony export */ });
/* harmony import */ var _InputHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InputHandler */ "./src/InputHandler.ts");
/* harmony import */ var _Ball__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Ball */ "./src/Ball.ts");
/* harmony import */ var _Paddle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Paddle */ "./src/Paddle.ts");



class Game {
    constructor(canvas) {
        this.lastTimestamp = 0;
        this.context = canvas.getContext('2d');
        this.height = canvas.height;
        this.width = canvas.width;
        this.paddle = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this.width, this.height);
        this.ball = new _Ball__WEBPACK_IMPORTED_MODULE_1__.default(this.width, this.height);
        this.inputHandler = new _InputHandler__WEBPACK_IMPORTED_MODULE_0__.default({
            arrowLeftPressed: () => this.paddle.moveLeft(),
            arrowLeftReleased: () => this.paddle.stopLeft(),
            arrowRightPressed: () => this.paddle.moveRight(),
            arrowRightReleased: () => this.paddle.stopRight(),
        });
        this.inputHandler.setupAllListeners();
        this.loop(1);
    }
    restart() {
        this.paddle = new _Paddle__WEBPACK_IMPORTED_MODULE_2__.default(this.width, this.height);
        this.ball = new _Ball__WEBPACK_IMPORTED_MODULE_1__.default(this.width, this.height);
        // this.inputHandler.setupAllListeners()
        this.loop(1);
    }
    stop() {
        this.inputHandler.cleanupAllListeners();
        setTimeout(this.restart.bind(this), 1000);
    }
    update(deltaTime) {
        this.paddle.update(deltaTime);
        this.ball.update(deltaTime);
        if (this.isBallOnPaddle()) {
            this.ball.vy = -1;
        }
    }
    draw() {
        this.ball.draw(this.context);
        this.paddle.draw(this.context);
    }
    clear() {
        this.context.clearRect(0, 0, this.width, this.height);
    }
    loop(timestamp) {
        const deltaTime = timestamp - this.lastTimestamp;
        this.lastTimestamp = timestamp;
        this.clear();
        this.update(deltaTime);
        this.draw();
        if (this.hasBallFallenThrough()) {
            this.stop();
            return;
        }
        window.requestAnimationFrame(this.loop.bind(this));
    }
    isBallOnPaddle() {
        return (this.ball.x >= this.paddle.x &&
            this.ball.x <= this.paddle.x + this.paddle.width &&
            this.ball.y + this.ball.radius >= this.paddle.y);
    }
    hasBallFallenThrough() {
        return this.ball.y - this.ball.radius >= this.height;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9HYW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sWUFBWSxNQUFNLGdCQUFnQixDQUFBO0FBQ3pDLE9BQU8sSUFBSSxNQUFNLFFBQVEsQ0FBQTtBQUN6QixPQUFPLE1BQU0sTUFBTSxVQUFVLENBQUE7QUFFN0IsTUFBTSxDQUFDLE9BQU8sT0FBTyxJQUFJO0lBWXZCLFlBQVksTUFBeUI7UUFGN0Isa0JBQWEsR0FBRyxDQUFDLENBQUE7UUFHdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFBO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQTtRQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUE7UUFFekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNqRCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBRTdDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUM7WUFDbkMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7WUFDOUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7WUFDL0MsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7WUFDaEQsa0JBQWtCLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7U0FDbEQsQ0FBQyxDQUFB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

/***/ }),

/***/ "./src/InputHandler.ts":
/*!*****************************!*\
  !*** ./src/InputHandler.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ InputHandler
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums */ "./src/enums.ts");

class InputHandler {
    constructor(handlers) {
        this.handlers = handlers;
    }
    setupAllListeners() {
        document.addEventListener('keydown', this.keyDownListener.bind(this));
        document.addEventListener('keyup', this.keyUpListener.bind(this));
        return this.cleanupAllListeners;
    }
    cleanupAllListeners() {
        document.removeEventListener('keydown', this.keyDownListener.bind(this));
        document.removeEventListener('keyup', this.keyUpListener.bind(this));
    }
    keyDownListener(keyEvent) {
        if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
            this.handlers.arrowLeftPressed();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
            this.handlers.arrowRightPressed();
    }
    keyUpListener(keyEvent) {
        if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.LEFT)
            this.handlers.arrowLeftReleased();
        else if (keyEvent.code === _enums__WEBPACK_IMPORTED_MODULE_0__.KEYS.RIGHT)
            this.handlers.arrowRightReleased();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXRIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0lucHV0SGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBUzlCLE1BQU0sQ0FBQyxPQUFPLE9BQU8sWUFBWTtJQUMvQixZQUFvQixRQUF3QjtRQUF4QixhQUFRLEdBQVIsUUFBUSxDQUFnQjtJQUFHLENBQUM7SUFFekMsaUJBQWlCO1FBQ3RCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUNyRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7UUFDakUsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUE7SUFDakMsQ0FBQztJQUVNLG1CQUFtQjtRQUN4QixRQUFRLENBQUMsbUJBQW1CLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7UUFDeEUsUUFBUSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO0lBQ3RFLENBQUM7SUFFTyxlQUFlLENBQUMsUUFBdUI7UUFDN0MsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFBO2FBQzVELElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtJQUMxRSxDQUFDO0lBRU8sYUFBYSxDQUFDLFFBQXVCO1FBQzNDLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTtZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTthQUM3RCxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEtBQUs7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixFQUFFLENBQUE7SUFDM0UsQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/Paddle.ts":
/*!***********************!*\
  !*** ./src/Paddle.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ Paddle
/* harmony export */ });
class Paddle {
    constructor(gameWidth, gameHeight) {
        this.gameWidth = gameWidth;
        this.gameHeight = gameHeight;
        this.width = 150;
        this.height = 25;
        this.padding = 5;
        this.speed = 50;
        this.x = (this.gameWidth - this.width) / 2;
        this.y = this.gameHeight - this.height - this.padding;
        this.direction = null;
    }
    moveLeft() {
        this.direction = 'left';
    }
    stopLeft() {
        if (this.direction !== 'left')
            return;
        this.direction = null;
    }
    moveRight() {
        this.direction = 'right';
    }
    stopRight() {
        if (this.direction !== 'right')
            return;
        this.direction = null;
    }
    stop() {
        this.direction = null;
    }
    update(deltaTime) {
        if (this.direction === null)
            return;
        else if (this.direction === 'left')
            this.x -= this.speed / deltaTime;
        else if (this.direction === 'right')
            this.x += this.speed / deltaTime;
        // left border
        if (this.x < 0 + this.padding) {
            this.x = this.padding;
        }
        // right border
        if (this.x + this.width > this.gameWidth - this.padding) {
            this.x = this.gameWidth - this.width - this.padding;
        }
    }
    draw(context) {
        const { x, y, width, height } = this;
        context.fillRect(x, y, width, height);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFkZGxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1BhZGRsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsT0FBTyxPQUFPLE1BQU07SUFTekIsWUFBb0IsU0FBaUIsRUFBVSxVQUFrQjtRQUE3QyxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQVUsZUFBVSxHQUFWLFVBQVUsQ0FBUTtRQVIxRCxVQUFLLEdBQUcsR0FBRyxDQUFBO1FBQ1gsV0FBTSxHQUFHLEVBQUUsQ0FBQTtRQUNWLFlBQU8sR0FBRyxDQUFDLENBQUE7UUFDWCxVQUFLLEdBQUcsRUFBRSxDQUFBO1FBTWhCLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtRQUNyRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sUUFBUTtRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO0lBQ3pCLENBQUM7SUFFTSxRQUFRO1FBQ2IsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU07WUFBRSxPQUFNO1FBQ3JDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFBO0lBQ3ZCLENBQUM7SUFFTSxTQUFTO1FBQ2QsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUE7SUFDMUIsQ0FBQztJQUVNLFNBQVM7UUFDZCxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssT0FBTztZQUFFLE9BQU07UUFDdEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7SUFDdkIsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtJQUN2QixDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQWlCO1FBQzdCLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJO1lBQUUsT0FBTTthQUM5QixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTTtZQUFFLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUE7YUFDL0QsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE9BQU87WUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFBO1FBRXJFLGNBQWM7UUFDZCxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDN0IsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO1NBQ3RCO1FBRUQsZUFBZTtRQUNmLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUN2RCxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO1NBQ3BEO0lBQ0gsQ0FBQztJQUVNLElBQUksQ0FBQyxPQUFpQztRQUMzQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFBO1FBQ3BDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDdkMsQ0FBQztDQUNGIn0=

/***/ }),

/***/ "./src/enums.ts":
/*!**********************!*\
  !*** ./src/enums.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KEYS": () => /* binding */ KEYS
/* harmony export */ });
var KEYS;
(function (KEYS) {
    KEYS["LEFT"] = "ArrowLeft";
    KEYS["RIGHT"] = "ArrowRight";
})(KEYS || (KEYS = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZW51bXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFOLElBQVksSUFHWDtBQUhELFdBQVksSUFBSTtJQUNkLDBCQUFrQixDQUFBO0lBQ2xCLDRCQUFvQixDQUFBO0FBQ3RCLENBQUMsRUFIVyxJQUFJLEtBQUosSUFBSSxRQUdmIn0=

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Game */ "./src/Game.ts");

const canvas = document.querySelector('#screen');
new _Game__WEBPACK_IMPORTED_MODULE_0__.default(canvas);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxJQUFJLE1BQU0sUUFBUSxDQUFBO0FBRXpCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFNBQVMsQ0FBRSxDQUFBO0FBRXBFLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBIn0=

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9CYWxsLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsLy4vc3JjL1BhZGRsZS50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9lbnVtcy50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2ViLWdhbWUtdHV0b3JpYWwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWItZ2FtZS10dXRvcmlhbC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3dlYi1nYW1lLXR1dG9yaWFsL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsKzdGOzs7Ozs7Ozs7Ozs7Ozs7OztBQ2hFRDtBQUNoQjtBQUNJO0FBQ2Y7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRDQUFNO0FBQ2hDLHdCQUF3QiwwQ0FBSTtBQUM1QixnQ0FBZ0Msa0RBQVk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNENBQU07QUFDaEMsd0JBQXdCLDBDQUFJO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx1OUc7Ozs7Ozs7Ozs7Ozs7OztBQ2pFWjtBQUNoQjtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZDQUFTO0FBQ3ZDO0FBQ0EsbUNBQW1DLDhDQUFVO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw2Q0FBUztBQUN2QztBQUNBLG1DQUFtQyw4Q0FBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsMjdDOzs7Ozs7Ozs7Ozs7OztBQzNCNUI7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDJxRTs7Ozs7Ozs7Ozs7Ozs7QUNwRHBDO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQkFBb0I7QUFDckIsMkNBQTJDLG1TOzs7Ozs7Ozs7Ozs7QUNMakI7QUFDMUI7QUFDQSxJQUFJLDBDQUFJO0FBQ1IsMkNBQTJDLG1UOzs7Ozs7VUNIM0M7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDckJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0Esd0NBQXdDLHlDQUF5QztXQUNqRjtXQUNBO1dBQ0EsRTs7Ozs7V0NQQSxzRjs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSxzREFBc0Qsa0JBQWtCO1dBQ3hFO1dBQ0EsK0NBQStDLGNBQWM7V0FDN0QsRTs7OztVQ05BO1VBQ0E7VUFDQTtVQUNBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZGRsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lV2lkdGgsIGdhbWVIZWlnaHQpIHtcclxuICAgICAgICB0aGlzLmdhbWVXaWR0aCA9IGdhbWVXaWR0aDtcclxuICAgICAgICB0aGlzLmdhbWVIZWlnaHQgPSBnYW1lSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gMTA7XHJcbiAgICAgICAgdGhpcy5wYWRkaW5nID0gMTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gNTA7XHJcbiAgICAgICAgdGhpcy52eCA9IDE7XHJcbiAgICAgICAgdGhpcy52eSA9IC0xO1xyXG4gICAgICAgIHRoaXMueCA9ICh0aGlzLmdhbWVXaWR0aCAtIHRoaXMucmFkaXVzKSAvIDI7XHJcbiAgICAgICAgdGhpcy55ID0gKHRoaXMuZ2FtZUhlaWdodCAtIHRoaXMucmFkaXVzIC0gdGhpcy5wYWRkaW5nKSAvIDI7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgbW92ZUxlZnQoKSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnbGVmdCc7XHJcbiAgICB9XHJcbiAgICBzdG9wTGVmdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT09ICdsZWZ0JylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIG1vdmVSaWdodCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdyaWdodCc7XHJcbiAgICB9XHJcbiAgICBzdG9wUmlnaHQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uICE9PSAncmlnaHQnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKSB7XHJcbiAgICAgICAgdGhpcy54ICs9ICh0aGlzLnZ4ICogdGhpcy5zcGVlZCkgLyBkZWx0YVRpbWU7XHJcbiAgICAgICAgdGhpcy55ICs9ICh0aGlzLnZ5ICogdGhpcy5zcGVlZCkgLyBkZWx0YVRpbWU7XHJcbiAgICAgICAgLy8gbGVmdCBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy54IC0gdGhpcy5yYWRpdXMgPCAwICsgdGhpcy5wYWRkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMucmFkaXVzICsgdGhpcy5wYWRkaW5nO1xyXG4gICAgICAgICAgICB0aGlzLnZ4ID0gLXRoaXMudng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJpZ2h0IGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnggKyB0aGlzLnJhZGl1cyA+IHRoaXMuZ2FtZVdpZHRoIC0gdGhpcy5wYWRkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZVdpZHRoIC0gdGhpcy5yYWRpdXMgLSB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgICAgIHRoaXMudnggPSAtdGhpcy52eDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdG9wIGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnkgPCAwICsgdGhpcy5yYWRpdXMgKyB0aGlzLnBhZGRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy55ID0gdGhpcy5yYWRpdXMgKyB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgICAgIHRoaXMudnkgPSAtdGhpcy52eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYm90dG9tIGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnkgPiB0aGlzLmdhbWVIZWlnaHQgLSB0aGlzLnJhZGl1cyAtIHRoaXMucGFkZGluZykge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnkgPSB0aGlzLmdhbWVIZWlnaHQgLSB0aGlzLnJhZGl1cyAtIHRoaXMucGFkZGluZ1xyXG4gICAgICAgICAgICAvLyB0aGlzLnZ5ID0gLXRoaXMudnlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3KGNvbnRleHQpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHJhZGl1cyB9ID0gdGhpcztcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pUW1Gc2JDNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlDWVd4c0xuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEUxQlFVMHNRMEZCUXl4UFFVRlBMRTlCUVU4c1RVRkJUVHRKUVZWNlFpeFpRVUZ2UWl4VFFVRnBRaXhGUVVGVkxGVkJRV3RDTzFGQlFUZERMR05CUVZNc1IwRkJWQ3hUUVVGVExFTkJRVkU3VVVGQlZTeGxRVUZWTEVkQlFWWXNWVUZCVlN4RFFVRlJPMUZCVkRGRUxGZEJRVTBzUjBGQlJ5eEZRVUZGTEVOQlFVRTdVVUZEVml4WlFVRlBMRWRCUVVjc1EwRkJReXhEUVVGQk8xRkJRMWdzVlVGQlN5eEhRVUZITEVWQlFVVXNRMEZCUVR0UlFVZFdMRTlCUVVVc1IwRkJSeXhEUVVGRExFTkJRVUU3VVVGRFVDeFBRVUZGTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVFN1VVRkpXaXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkJPMUZCUXpORExFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlFUdFJRVU16UkN4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlFUdEpRVU4yUWl4RFFVRkRPMGxCUlUwc1VVRkJVVHRSUVVOaUxFbEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NUVUZCVFN4RFFVRkJPMGxCUTNwQ0xFTkJRVU03U1VGRlRTeFJRVUZSTzFGQlEySXNTVUZCU1N4SlFVRkpMRU5CUVVNc1UwRkJVeXhMUVVGTExFMUJRVTA3V1VGQlJTeFBRVUZOTzFGQlEzSkRMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZCTzBsQlEzWkNMRU5CUVVNN1NVRkZUU3hUUVVGVE8xRkJRMlFzU1VGQlNTeERRVUZETEZOQlFWTXNSMEZCUnl4UFFVRlBMRU5CUVVFN1NVRkRNVUlzUTBGQlF6dEpRVVZOTEZOQlFWTTdVVUZEWkN4SlFVRkpMRWxCUVVrc1EwRkJReXhUUVVGVExFdEJRVXNzVDBGQlR6dFpRVUZGTEU5QlFVMDdVVUZEZEVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eEpRVUZKTEVOQlFVRTdTVUZEZGtJc1EwRkJRenRKUVVWTkxFbEJRVWs3VVVGRFZDeEpRVUZKTEVOQlFVTXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRVHRKUVVOMlFpeERRVUZETzBsQlJVMHNUVUZCVFN4RFFVRkRMRk5CUVdsQ08xRkJRemRDTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeEhRVUZITEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhUUVVGVExFTkJRVUU3VVVGRE5VTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVkQlFVY3NTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhIUVVGSExGTkJRVk1zUTBGQlFUdFJRVVUxUXl4alFVRmpPMUZCUTJRc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVsQlFVa3NRMEZCUXl4TlFVRk5MRWRCUVVjc1EwRkJReXhIUVVGSExFbEJRVWtzUTBGQlF5eFBRVUZQTEVWQlFVVTdXVUZETTBNc1NVRkJTU3hEUVVGRExFTkJRVU1zUjBGQlJ5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVUU3V1VGRGJrTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVRTdVMEZEYmtJN1VVRkZSQ3hsUVVGbE8xRkJRMllzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzU1VGQlNTeERRVUZETEZOQlFWTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRk8xbEJRM2hFTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVUU3V1VGRGNFUXNTVUZCU1N4RFFVRkRMRVZCUVVVc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVRTdVMEZEYmtJN1VVRkZSQ3hoUVVGaE8xRkJRMklzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVsQlFVa3NRMEZCUXl4UFFVRlBMRVZCUVVVN1dVRkRNME1zU1VGQlNTeERRVUZETEVOQlFVTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVRTdXVUZEYmtNc1NVRkJTU3hEUVVGRExFVkJRVVVzUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVFN1UwRkRia0k3VVVGRlJDeG5Ra0ZCWjBJN1VVRkRhRUlzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhWUVVGVkxFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRk8xbEJRM3BFTEhkRVFVRjNSRHRaUVVONFJDeHhRa0ZCY1VJN1UwRkRkRUk3U1VGRFNDeERRVUZETzBsQlJVMHNTVUZCU1N4RFFVRkRMRTlCUVdsRE8xRkJRek5ETEUxQlFVMHNSVUZCUlN4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFMUJRVTBzUlVGQlJTeEhRVUZITEVsQlFVa3NRMEZCUVR0UlFVTTNRaXhQUVVGUExFTkJRVU1zVTBGQlV5eEZRVUZGTEVOQlFVRTdVVUZEYmtJc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRTFCUVUwc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eEhRVUZITEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJRVHRSUVVONlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RlFVRkZMRU5CUVVFN1VVRkRaQ3hQUVVGUExFTkJRVU1zVTBGQlV5eEZRVUZGTEVOQlFVRTdTVUZEY2tJc1EwRkJRenREUVVOR0luMD0iLCJpbXBvcnQgSW5wdXRIYW5kbGVyIGZyb20gJy4vSW5wdXRIYW5kbGVyJztcclxuaW1wb3J0IEJhbGwgZnJvbSAnLi9CYWxsJztcclxuaW1wb3J0IFBhZGRsZSBmcm9tICcuL1BhZGRsZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xyXG4gICAgY29uc3RydWN0b3IoY2FudmFzKSB7XHJcbiAgICAgICAgdGhpcy5sYXN0VGltZXN0YW1wID0gMDtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICB0aGlzLnBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuYmFsbCA9IG5ldyBCYWxsKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmlucHV0SGFuZGxlciA9IG5ldyBJbnB1dEhhbmRsZXIoe1xyXG4gICAgICAgICAgICBhcnJvd0xlZnRQcmVzc2VkOiAoKSA9PiB0aGlzLnBhZGRsZS5tb3ZlTGVmdCgpLFxyXG4gICAgICAgICAgICBhcnJvd0xlZnRSZWxlYXNlZDogKCkgPT4gdGhpcy5wYWRkbGUuc3RvcExlZnQoKSxcclxuICAgICAgICAgICAgYXJyb3dSaWdodFByZXNzZWQ6ICgpID0+IHRoaXMucGFkZGxlLm1vdmVSaWdodCgpLFxyXG4gICAgICAgICAgICBhcnJvd1JpZ2h0UmVsZWFzZWQ6ICgpID0+IHRoaXMucGFkZGxlLnN0b3BSaWdodCgpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRIYW5kbGVyLnNldHVwQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5sb29wKDEpO1xyXG4gICAgfVxyXG4gICAgcmVzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuYmFsbCA9IG5ldyBCYWxsKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICAvLyB0aGlzLmlucHV0SGFuZGxlci5zZXR1cEFsbExpc3RlbmVycygpXHJcbiAgICAgICAgdGhpcy5sb29wKDEpO1xyXG4gICAgfVxyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICB0aGlzLmlucHV0SGFuZGxlci5jbGVhbnVwQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlc3RhcnQuYmluZCh0aGlzKSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5wYWRkbGUudXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmFsbE9uUGFkZGxlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWxsLnZ5ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhdygpIHtcclxuICAgICAgICB0aGlzLmJhbGwuZHJhdyh0aGlzLmNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGFkZGxlLmRyYXcodGhpcy5jb250ZXh0KTtcclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgbG9vcCh0aW1lc3RhbXApIHtcclxuICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RUaW1lc3RhbXA7XHJcbiAgICAgICAgdGhpcy5sYXN0VGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgIGlmICh0aGlzLmhhc0JhbGxGYWxsZW5UaHJvdWdoKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmxvb3AuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBpc0JhbGxPblBhZGRsZSgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuYmFsbC54ID49IHRoaXMucGFkZGxlLnggJiZcclxuICAgICAgICAgICAgdGhpcy5iYWxsLnggPD0gdGhpcy5wYWRkbGUueCArIHRoaXMucGFkZGxlLndpZHRoICYmXHJcbiAgICAgICAgICAgIHRoaXMuYmFsbC55ICsgdGhpcy5iYWxsLnJhZGl1cyA+PSB0aGlzLnBhZGRsZS55KTtcclxuICAgIH1cclxuICAgIGhhc0JhbGxGYWxsZW5UaHJvdWdoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhbGwueSAtIHRoaXMuYmFsbC5yYWRpdXMgPj0gdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pUjJGdFpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlIWVcxbExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEU5QlFVOHNXVUZCV1N4TlFVRk5MR2RDUVVGblFpeERRVUZCTzBGQlEzcERMRTlCUVU4c1NVRkJTU3hOUVVGTkxGRkJRVkVzUTBGQlFUdEJRVU42UWl4UFFVRlBMRTFCUVUwc1RVRkJUU3hWUVVGVkxFTkJRVUU3UVVGRk4wSXNUVUZCVFN4RFFVRkRMRTlCUVU4c1QwRkJUeXhKUVVGSk8wbEJXWFpDTEZsQlFWa3NUVUZCZVVJN1VVRkdOMElzYTBKQlFXRXNSMEZCUnl4RFFVRkRMRU5CUVVFN1VVRkhka0lzU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4TlFVRk5MRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlJTeERRVUZCTzFGQlEzWkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUVR0UlFVTXpRaXhKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVFN1VVRkZla0lzU1VGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eEZRVUZGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRVHRSUVVOcVJDeEpRVUZKTEVOQlFVTXNTVUZCU1N4SFFVRkhMRWxCUVVrc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVWQlFVVXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGQk8xRkJSVGRETEVsQlFVa3NRMEZCUXl4WlFVRlpMRWRCUVVjc1NVRkJTU3haUVVGWkxFTkJRVU03V1VGRGJrTXNaMEpCUVdkQ0xFVkJRVVVzUjBGQlJ5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFVkJRVVU3V1VGRE9VTXNhVUpCUVdsQ0xFVkJRVVVzUjBGQlJ5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFVkJRVVU3V1VGREwwTXNhVUpCUVdsQ0xFVkJRVVVzUjBGQlJ5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFVkJRVVU3V1VGRGFFUXNhMEpCUVd0Q0xFVkJRVVVzUjBGQlJ5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFVkJRVVU3VTBGRGJFUXNRMEZCUXl4RFFVRkJPMUZCUlVZc1NVRkJTU3hEUVVGRExGbEJRVmtzUTBGQlF5eHBRa0ZCYVVJc1JVRkJSU3hEUVVGQk8xRkJSWEpETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVUU3U1VGRFpDeERRVUZETzBsQlJVOHNUMEZCVHp0UlFVTmlMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzU1VGQlNTeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1JVRkJSU3hKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVRTdVVUZEYWtRc1NVRkJTU3hEUVVGRExFbEJRVWtzUjBGQlJ5eEpRVUZKTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhGUVVGRkxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUVR0UlFVTTNReXgzUTBGQmQwTTdVVUZEZUVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUVR0SlFVTmtMRU5CUVVNN1NVRkZUeXhKUVVGSk8xRkJRMVlzU1VGQlNTeERRVUZETEZsQlFWa3NRMEZCUXl4dFFrRkJiVUlzUlVGQlJTeERRVUZCTzFGQlEzWkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlFUdEpRVU16UXl4RFFVRkRPMGxCUlU4c1RVRkJUU3hEUVVGRExGTkJRV2xDTzFGQlF6bENMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkJPMUZCUXpkQ0xFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGQk8xRkJSVE5DTEVsQlFVa3NTVUZCU1N4RFFVRkRMR05CUVdNc1JVRkJSU3hGUVVGRk8xbEJRM3BDTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZCTzFOQlEyeENPMGxCUTBnc1EwRkJRenRKUVVWUExFbEJRVWs3VVVGRFZpeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVRTdVVUZETlVJc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGQk8wbEJRMmhETEVOQlFVTTdTVUZGVHl4TFFVRkxPMUZCUTFnc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zUzBGQlN5eEZRVUZGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRVHRKUVVOMlJDeERRVUZETzBsQlJVOHNTVUZCU1N4RFFVRkRMRk5CUVRoQ08xRkJRM3BETEUxQlFVMHNVMEZCVXl4SFFVRkhMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZCTzFGQlEyaEVMRWxCUVVrc1EwRkJReXhoUVVGaExFZEJRVWNzVTBGQlV5eERRVUZCTzFGQlJUbENMRWxCUVVrc1EwRkJReXhMUVVGTExFVkJRVVVzUTBGQlFUdFJRVU5hTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVUU3VVVGRGRFSXNTVUZCU1N4RFFVRkRMRWxCUVVrc1JVRkJSU3hEUVVGQk8xRkJSVmdzU1VGQlNTeEpRVUZKTEVOQlFVTXNiMEpCUVc5Q0xFVkJRVVVzUlVGQlJUdFpRVU12UWl4SlFVRkpMRU5CUVVNc1NVRkJTU3hGUVVGRkxFTkJRVUU3V1VGRFdDeFBRVUZOTzFOQlExQTdVVUZGUkN4TlFVRk5MRU5CUVVNc2NVSkJRWEZDTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUVR0SlFVTndSQ3hEUVVGRE8wbEJSVThzWTBGQll6dFJRVU53UWl4UFFVRlBMRU5CUTB3c1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVsQlFVa3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8xbEJRelZDTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhKUVVGSkxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN6dFpRVU5vUkN4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUjBGQlJ5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1NVRkJTU3hKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZEYUVRc1EwRkJRVHRKUVVOSUxFTkJRVU03U1VGRlR5eHZRa0ZCYjBJN1VVRkRNVUlzVDBGQlR5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNTVUZCU1N4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGQk8wbEJRM1JFTEVOQlFVTTdRMEZEUmlKOSIsImltcG9ydCB7IEtFWVMgfSBmcm9tICcuL2VudW1zJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGhhbmRsZXJzKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzO1xyXG4gICAgfVxyXG4gICAgc2V0dXBBbGxMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5RG93bkxpc3RlbmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXlVcExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsZWFudXBBbGxMaXN0ZW5lcnM7XHJcbiAgICB9XHJcbiAgICBjbGVhbnVwQWxsTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleURvd25MaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5VXBMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGtleURvd25MaXN0ZW5lcihrZXlFdmVudCkge1xyXG4gICAgICAgIGlmIChrZXlFdmVudC5jb2RlID09PSBLRVlTLkxFRlQpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYXJyb3dMZWZ0UHJlc3NlZCgpO1xyXG4gICAgICAgIGVsc2UgaWYgKGtleUV2ZW50LmNvZGUgPT09IEtFWVMuUklHSFQpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYXJyb3dSaWdodFByZXNzZWQoKTtcclxuICAgIH1cclxuICAgIGtleVVwTGlzdGVuZXIoa2V5RXZlbnQpIHtcclxuICAgICAgICBpZiAoa2V5RXZlbnQuY29kZSA9PT0gS0VZUy5MRUZUKVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmFycm93TGVmdFJlbGVhc2VkKCk7XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5RXZlbnQuY29kZSA9PT0gS0VZUy5SSUdIVClcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hcnJvd1JpZ2h0UmVsZWFzZWQoKTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lTVzV3ZFhSSVlXNWtiR1Z5TG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMaTR2YzNKakwwbHVjSFYwU0dGdVpHeGxjaTUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFBRVUZQTEVWQlFVVXNTVUZCU1N4RlFVRkZMRTFCUVUwc1UwRkJVeXhEUVVGQk8wRkJVemxDTEUxQlFVMHNRMEZCUXl4UFFVRlBMRTlCUVU4c1dVRkJXVHRKUVVNdlFpeFpRVUZ2UWl4UlFVRjNRanRSUVVGNFFpeGhRVUZSTEVkQlFWSXNVVUZCVVN4RFFVRm5RanRKUVVGSExFTkJRVU03U1VGRmVrTXNhVUpCUVdsQ08xRkJRM1JDTEZGQlFWRXNRMEZCUXl4blFrRkJaMElzUTBGQlF5eFRRVUZUTEVWQlFVVXNTVUZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUVR0UlFVTnlSU3hSUVVGUkxFTkJRVU1zWjBKQlFXZENMRU5CUVVNc1QwRkJUeXhGUVVGRkxFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVUU3VVVGRGFrVXNUMEZCVHl4SlFVRkpMRU5CUVVNc2JVSkJRVzFDTEVOQlFVRTdTVUZEYWtNc1EwRkJRenRKUVVWTkxHMUNRVUZ0UWp0UlFVTjRRaXhSUVVGUkxFTkJRVU1zYlVKQlFXMUNMRU5CUVVNc1UwRkJVeXhGUVVGRkxFbEJRVWtzUTBGQlF5eGxRVUZsTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVUU3VVVGRGVFVXNVVUZCVVN4RFFVRkRMRzFDUVVGdFFpeERRVUZETEU5QlFVOHNSVUZCUlN4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkJPMGxCUTNSRkxFTkJRVU03U1VGRlR5eGxRVUZsTEVOQlFVTXNVVUZCZFVJN1VVRkROME1zU1VGQlNTeFJRVUZSTEVOQlFVTXNTVUZCU1N4TFFVRkxMRWxCUVVrc1EwRkJReXhKUVVGSk8xbEJRVVVzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4blFrRkJaMElzUlVGQlJTeERRVUZCTzJGQlF6VkVMRWxCUVVrc1VVRkJVU3hEUVVGRExFbEJRVWtzUzBGQlN5eEpRVUZKTEVOQlFVTXNTMEZCU3p0WlFVRkZMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zYVVKQlFXbENMRVZCUVVVc1EwRkJRVHRKUVVNeFJTeERRVUZETzBsQlJVOHNZVUZCWVN4RFFVRkRMRkZCUVhWQ08xRkJRek5ETEVsQlFVa3NVVUZCVVN4RFFVRkRMRWxCUVVrc1MwRkJTeXhKUVVGSkxFTkJRVU1zU1VGQlNUdFpRVUZGTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc2FVSkJRV2xDTEVWQlFVVXNRMEZCUVR0aFFVTTNSQ3hKUVVGSkxGRkJRVkVzUTBGQlF5eEpRVUZKTEV0QlFVc3NTVUZCU1N4RFFVRkRMRXRCUVVzN1dVRkJSU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEd0Q1FVRnJRaXhGUVVGRkxFTkJRVUU3U1VGRE0wVXNRMEZCUXp0RFFVTkdJbjA9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFkZGxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVXaWR0aCwgZ2FtZUhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVdpZHRoID0gZ2FtZVdpZHRoO1xyXG4gICAgICAgIHRoaXMuZ2FtZUhlaWdodCA9IGdhbWVIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDE1MDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDI1O1xyXG4gICAgICAgIHRoaXMucGFkZGluZyA9IDU7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDUwO1xyXG4gICAgICAgIHRoaXMueCA9ICh0aGlzLmdhbWVXaWR0aCAtIHRoaXMud2lkdGgpIC8gMjtcclxuICAgICAgICB0aGlzLnkgPSB0aGlzLmdhbWVIZWlnaHQgLSB0aGlzLmhlaWdodCAtIHRoaXMucGFkZGluZztcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBtb3ZlTGVmdCgpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgIH1cclxuICAgIHN0b3BMZWZ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPT0gJ2xlZnQnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgbW92ZVJpZ2h0KCkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ3JpZ2h0JztcclxuICAgIH1cclxuICAgIHN0b3BSaWdodCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT09ICdyaWdodCcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkZWx0YVRpbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ2xlZnQnKVxyXG4gICAgICAgICAgICB0aGlzLnggLT0gdGhpcy5zcGVlZCAvIGRlbHRhVGltZTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0JylcclxuICAgICAgICAgICAgdGhpcy54ICs9IHRoaXMuc3BlZWQgLyBkZWx0YVRpbWU7XHJcbiAgICAgICAgLy8gbGVmdCBib3JkZXJcclxuICAgICAgICBpZiAodGhpcy54IDwgMCArIHRoaXMucGFkZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB0aGlzLnBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJpZ2h0IGJvcmRlclxyXG4gICAgICAgIGlmICh0aGlzLnggKyB0aGlzLndpZHRoID4gdGhpcy5nYW1lV2lkdGggLSB0aGlzLnBhZGRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5nYW1lV2lkdGggLSB0aGlzLndpZHRoIC0gdGhpcy5wYWRkaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRyYXcoY29udGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVVHRmtaR3hsTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMaTR2YzNKakwxQmhaR1JzWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hOUVVGTkxFTkJRVU1zVDBGQlR5eFBRVUZQTEUxQlFVMDdTVUZUZWtJc1dVRkJiMElzVTBGQmFVSXNSVUZCVlN4VlFVRnJRanRSUVVFM1F5eGpRVUZUTEVkQlFWUXNVMEZCVXl4RFFVRlJPMUZCUVZVc1pVRkJWU3hIUVVGV0xGVkJRVlVzUTBGQlVUdFJRVkl4UkN4VlFVRkxMRWRCUVVjc1IwRkJSeXhEUVVGQk8xRkJRMWdzVjBGQlRTeEhRVUZITEVWQlFVVXNRMEZCUVR0UlFVTldMRmxCUVU4c1IwRkJSeXhEUVVGRExFTkJRVUU3VVVGRFdDeFZRVUZMTEVkQlFVY3NSVUZCUlN4RFFVRkJPMUZCVFdoQ0xFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVFN1VVRkRNVU1zU1VGQlNTeERRVUZETEVOQlFVTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJRVHRSUVVOeVJDeEpRVUZKTEVOQlFVTXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRVHRKUVVOMlFpeERRVUZETzBsQlJVMHNVVUZCVVR0UlFVTmlMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzVFVGQlRTeERRVUZCTzBsQlEzcENMRU5CUVVNN1NVRkZUU3hSUVVGUk8xRkJRMklzU1VGQlNTeEpRVUZKTEVOQlFVTXNVMEZCVXl4TFFVRkxMRTFCUVUwN1dVRkJSU3hQUVVGTk8xRkJRM0pETEVsQlFVa3NRMEZCUXl4VFFVRlRMRWRCUVVjc1NVRkJTU3hEUVVGQk8wbEJRM1pDTEVOQlFVTTdTVUZGVFN4VFFVRlRPMUZCUTJRc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eFBRVUZQTEVOQlFVRTdTVUZETVVJc1EwRkJRenRKUVVWTkxGTkJRVk03VVVGRFpDeEpRVUZKTEVsQlFVa3NRMEZCUXl4VFFVRlRMRXRCUVVzc1QwRkJUenRaUVVGRkxFOUJRVTA3VVVGRGRFTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVUU3U1VGRGRrSXNRMEZCUXp0SlFVVk5MRWxCUVVrN1VVRkRWQ3hKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUVR0SlFVTjJRaXhEUVVGRE8wbEJSVTBzVFVGQlRTeERRVUZETEZOQlFXbENPMUZCUXpkQ0xFbEJRVWtzU1VGQlNTeERRVUZETEZOQlFWTXNTMEZCU3l4SlFVRkpPMWxCUVVVc1QwRkJUVHRoUVVNNVFpeEpRVUZKTEVsQlFVa3NRMEZCUXl4VFFVRlRMRXRCUVVzc1RVRkJUVHRaUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETEVsQlFVa3NTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhUUVVGVExFTkJRVUU3WVVGREwwUXNTVUZCU1N4SlFVRkpMRU5CUVVNc1UwRkJVeXhMUVVGTExFOUJRVTg3V1VGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzVTBGQlV5eERRVUZCTzFGQlJYSkZMR05CUVdNN1VVRkRaQ3hKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVU3V1VGRE4wSXNTVUZCU1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZCTzFOQlEzUkNPMUZCUlVRc1pVRkJaVHRSUVVObUxFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFbEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTlCUVU4c1JVRkJSVHRaUVVOMlJDeEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZETEV0QlFVc3NSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGQk8xTkJRM0JFTzBsQlEwZ3NRMEZCUXp0SlFVVk5MRWxCUVVrc1EwRkJReXhQUVVGcFF6dFJRVU16UXl4TlFVRk5MRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zUlVGQlJTeExRVUZMTEVWQlFVVXNUVUZCVFN4RlFVRkZMRWRCUVVjc1NVRkJTU3hEUVVGQk8xRkJRM0JETEU5QlFVOHNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUlVGQlJTeExRVUZMTEVWQlFVVXNUVUZCVFN4RFFVRkRMRU5CUVVFN1NVRkRka01zUTBGQlF6dERRVU5HSW4wPSIsImV4cG9ydCB2YXIgS0VZUztcclxuKGZ1bmN0aW9uIChLRVlTKSB7XHJcbiAgICBLRVlTW1wiTEVGVFwiXSA9IFwiQXJyb3dMZWZ0XCI7XHJcbiAgICBLRVlTW1wiUklHSFRcIl0gPSBcIkFycm93UmlnaHRcIjtcclxufSkoS0VZUyB8fCAoS0VZUyA9IHt9KSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpXNTFiWE11YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTl6Y21NdlpXNTFiWE11ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNUVUZCVFN4RFFVRk9MRWxCUVZrc1NVRkhXRHRCUVVoRUxGZEJRVmtzU1VGQlNUdEpRVU5rTERCQ1FVRnJRaXhEUVVGQk8wbEJRMnhDTERSQ1FVRnZRaXhEUVVGQk8wRkJRM1JDTEVOQlFVTXNSVUZJVnl4SlFVRkpMRXRCUVVvc1NVRkJTU3hSUVVkbUluMD0iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2NyZWVuJyk7XHJcbm5ldyBHYW1lKGNhbnZhcyk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFXNWtaWGd1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTl6Y21NdmFXNWtaWGd1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNUMEZCVHl4SlFVRkpMRTFCUVUwc1VVRkJVU3hEUVVGQk8wRkJSWHBDTEUxQlFVMHNUVUZCVFN4SFFVRkhMRkZCUVZFc1EwRkJReXhoUVVGaExFTkJRVzlDTEZOQlFWTXNRMEZCUlN4RFFVRkJPMEZCUlhCRkxFbEJRVWtzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkJJbjA9IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgudHNcIik7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdleHBvcnRzJyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG4iXSwic291cmNlUm9vdCI6IiJ9